2015-01-22  Nick Clifton  <nickc@redhat.com>

	Issue 5553743
	* config/msp430/msp430.c (msp430_use_f5_series_hwmult): Add more
	MCU names and prefixes.

2015-01-09  Nick Clifton  <nickc@redhat.com>

	Issue 5472893:
	* config/msp430/msp430.md (zero_extendqihi2): Add
	register-to-register extending pattern.
	(zero_extendqihi2 peephole): Fix test for invocation.

2014-12-22  Nick Clifton  <nickc@redhat.com>

	BZ 64160
	* config/msp430/msp430.md (SImode add splitter): Do not use when
	the source and destination partially overlap.

2014-12-15  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.c (msp430_attr): Remove unneeded assert.

2014-12-11  Nick Clifton  <nickc@redhat.com>

	BZ target/64160
	* config/msp430/msp430.md (Split SImode add into two HImode adds):
	Do not split if the source and destination partially overlap.

2014-10-23  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.c (msp430_print_operand): 'x' modifier is independend of -mlarge.

2014-10-16  Nick Clifton  <nickc@redhat.com>

	Issue 5228433
	* config/msp430/msp430.c (msp430_gen_prefix): Set memory regions for
	data as well.
	(msp430_output_aligned_decl_common): New function.
	* config/msp430/msp430-protos.h: Prototype
	msp430_output_aligned_decl_common.
	* config/msp430/msp430.h (ASM_OUTPUT_ALIGNED_DECL_COMMON):
	Define.

2014-09-12  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.md (extendhipsi2): Use 20-bit form of RLAM/RRAM.
	(extend_and_shift1_hipsi2): Likewise.
	(extend_and_shift2_hipsi2): Likewise.

2014-09-12  Nick Clifton  <nickc@redhat.com>

	Issue 5215003
	* config/msp430/msp430.c (msp430_use_f5_series_hwmult): Add more
	F5 names.  Add search caching.
	(use_32bit_hwmult): Add search caching.
	(msp430_no_hwmult): Add more no-mult MCU names.

2014-09-11  Nick Clifton  <nickc@redhat.com>

	Issue 5215003
	* config/msp430/msp430.c (msp430_no_hwmult): New function.
	(msp430_output_labelref): Use it.

2014-09-05  DJ Delorie  <dj@redhat.com>

	* doc/invoke.texi (MSP430 Options): Minor tweaks to text, add
	-minrt to index.

2014-08-08  DJ Delorie  <dj@redhat.com>

	* dwarf2out.c (mem_loc_descriptor): Allow partial-int modes for
	addresses.

2014-08-06  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.h (DWARF2_ADDR_SIZE): Make addr size machine-dependent.

2014-07-31  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.c (msp430_mcu_name): Lower case the 430i family.

2014-06-25  DJ Delorie  <dj@redhat.com>

	* simplify-rtx.c (simplify_const_unary_operation): Use precision, not bitsize.

2014-06-18  DJ Delorie  <dj@redhat.com>

	* machmode.h (int_n_data_t): New.
	(int_n_enabled_p): New.
	(int_n_data): New.
	* tree.c (int_n_enabled_p): New.
	(int_n_trees): New.
	(make_or_reuse_type): Check for all __intN types, not just
	__int128.
	(build_common_tree_nodes): Likewise.  Also fill in integer_typs[]
	entries.
	* tree.h (int128_integer_type_node): Remove.
	(int128_unsigned_type_node): Remove.
	(int_n_trees_t): New.
	(int_n_enabled_p): New.
	(int_n_trees): New.
	* toplev.c (standard_type_bitsize): New.
	(do_compile): Check which __intN types are enabled for the current
	run.
	* builtin-types.def (BT_INT128): Remove.
	(BT_UINT128): Remove.
	* machmode.def: Add macro to create __int128 for all targets.
	* stor-layout.c (mode_for_size): Support __intN types.
	(smallest_mode_for_size): Likewise.
	(layout_type): Use precision, not size.
	(initialize_sizetypes): Support __intN types.
	* genmodes.c (struct mode_data): Add int_n field.
	(blank_mode): Likewise.
	(INT_N): New.
	(make_int_n): New.
	(emit_insn_modes_h): Count __intN entries and define
	NUM_INT_N_ENTS.
	(emit_mode_int_n): New.
	(emit_insn_modes_c): Call it.
	* gimple.c (gimple_signed_or_unsigned_type): Check for all __intN
	types, not just __int128.
	* tree-core.h (integer_type_kind): Remove __int128-specific
	entries, reserve spots for __intN entries.
	* cppbuiltin.c (define_builtin_macros_for_type_sizes): Round
	pointer size up to a power of two.
	* defaults.h (DWARF2_ADDR_SIZE): Round up.
	(POINTER_SIZE_UNITS): New, rounded up value.
	* dwarf2asm.c (size_of_encoded_value): Use it.
	(dw2_output_indirect_constant_1): Likewise.
	* expmed.c (init_expmed_one_conv): We now know the sizes of
	partial int modes.
	* expr.c (convert_move): If the target has an explicit converter,
	use it.
	* loop-iv.c (iv_number_of_iterations): Use precision, not size.
	* optabs.c (expand_float): Use precision, not size.
	(expand_fix): Likewise.
	* simplify-rtx (simplify_unary_operation_1): Likewise.
	* tree-dfa.c (get_ref_base_and_extent): Likewise.
	* varasm.c (assemble_addr_to_section): Round up pointer sizes.
	(default_assemble_integer) Likewise.
	(dump_tm_clone_pairs): Likewise.

	* config/msp430/msp430-protos.h (msp430_hard_regno_nregs_has_padding): New.
	(msp430_hard_regno_nregs_with_padding): New.
	* config/msp430/msp430.c (msp430_scalar_mode_supported_p): New.
	(msp430_hard_regno_nregs_has_padding): New.
	(msp430_hard_regno_nregs_with_padding): New.
	(msp430_unwind_word_mode): Use PSImode instead of SImode.
	(msp430_addr_space_legitimate_address_p): New.
	(msp430_asm_integer): New.
	(msp430_init_dwarf_reg_sizes_extra): New.
	(msp430_print_operand): Use X suffix for PSImode even in small model.
	* config/msp430/msp430.h (POINTER_SIZE): Use 20 bits, not 32.
	(PTR_SIZE): ...but 4 bytes for EH.
	(SIZE_TYPE): Use __int20.
	(PTRDIFF_TYPE): Likewise.
	(INCOMING_FRAME_SP_OFFSET): Adjust.
	* config/msp430/msp430.md (movqi_topbyte): New.
	(movpsi): Use fixed suffixes.
	(movsipsi2): Enable for 430X, not large model.
	(extendhipsi2): Likewise.
	(zero_extendhisi2): Likewise.
	(zero_extendhisipsi2): Likewise.
	(extend_and_shift1_hipsi2): Likewise.
	(extendpsisi2): Likewise.
	(*bitbranch<mode>4_z): Fix suffix logic.

2014-06-13  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.c (msp430_do_not_relax_short_jumps): New function.
	* config/msp430/msp430-protos.h (msp430_do_not_relax_short_jumps):
	Add prototype.
	* config/msp430/msp430.md (cbranchhi4_real): Generate long branch
	sequences if necessary.

2014-05-28  Nick Clifton  <nickc@redhat.com>

	* config/rx/constraints.md (Ibset): Delete.
	* config/rx/predicates.md (rx_bitclr_operand): Delete.
	(rx_bitset_operand): Delete.
	(rx_store_multiple_operand): Improve test.
	* config/rx/rx.c (rx_print_operand): Remove 'b' case.
	(gen_rx_store_vector): Place stack decrement first in vector.
	* config/rx/rx.h (TARGET_USE_FPU): Fix definition.
	* config/rx/rx.md (xorqi3): Delete.
	(stack_push): Place stack decrement first in vector.
	(bitset_in_memory_2): Delete.
	(bitclr_in_memory_2): Delete.

2014-05-23  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.md: Add NOP after DINT in hardware multiply
	patterns.

2014-05-22  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.h (ASM_SPEC): Add spaces after inserted
	options.

2014-05-20  DJ Delorie  <dj@redhat.com>

	* config/msp430/msp430.md (split): Don't allow subregs when
	splitting SImode adds.
	(andneghi): Fix subtraction logic.
	* config/msp430/predicates.md (msp430_nonsubreg_or_imm_operand): New.

2014-05-19  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.c (msp430_print_operand): Handle
	ZERO_EXTRACT.
	(TARGET_GIMPLIFY_VA_ARG_EXPR): Define.
	(msp430_gimplify_va_arg_expr): New function.

2014-05-19  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.md: Use + as constraint for operand 0.

2014-04-29  Nick Clifton  <nickc@redhat.com>

	* builtins.c (expand_builtin_signbit): If the result is larger
	than the input then do not use the builtin.

2014-04-28  Nick Clifton  <nickc@redhat.com>

	* tree-nested.c (get_nl_goto_field): Always use ptr_type_node for
	the stack save area.

2014-04-24  Nick Clifton  <nickc@redhat.com>

	* config/msp430/msp430.md (umulsidi3): Fix typo.

	* config/rl78/constraints.md (Cs1): Fix stack offset check.
	* config/rl78/predicates.md (rl78_stack_based_mem): Likewise.
	* config/rl78/rl78-real.md (andhi3_real): New pattern.
	* config/rl78/rl78-virt.md (umulhi3_shift_virt): Remove memory
	destination.
	(umulqihi3_virt): Likewise.
	(andhi3_virt): New pattern.
	* config/rl78/rl78.c (transcode_memory_code): Fix stack offset
	check.

2014-04-23  Nick Clifton  <nickc@redhat.com>

	* tree-loop-distribution.c (classify_partition): Do not use the
	builtin memset code if compiling a function called "memset".  The
	builtin code may decide to call a library function called "memset"
	which would result in an infinite loop.

2014-03-26  Nick Clifton  <nickc@redhat.com>

	* configure.ac: Do not split pedantic warnings across lines.
	* configure: Regenerate.

2014-03-26  Nick Clifton  <nickc@redhat.com>

	* dwarf2out.c (const_ok_for_output_1): Do not complain about
	unrecognized UNSPECs.

2014-03-21  Nick Clifton  <nickc@redhat.com>

	* dwarf2cfi.c (maybe_record_trace_start): Suppres CFI check.
	* config/rx/rx.c (rx_override_options_after_change): Always set
	finite math flag.

2014-02-24  Nick Clifton  <nickc@redhat.com>

	Import sanitized patches from devo:

	* Makefile.in: Use correct newlib include directory.
	* configure.in: Likewise.
	* configure: Regenerate.
	* common.opt: Don't use zlib compression by default.
	* dwarf2cfi.c (expand_builtin_init_dwarf_reg_sizes): Ensure that
	the dwarf_reg_size table is big enough.
	* dwarf2out.c (output_loc_operands): Fix for small targets.
	(mem_loc_descriptor): Likewise.
	(field_byte_offset): Likewise.
	* except.c (init_eh): Fix thinko computing size of setjmp buffer.
	* expr.c (convert_move): Handle constant fill values.
	(store_field): Handle narrow volatile bitfields.
	(expand_expr_real_2): Check for signed multiply being available.
	(expand_expr_real_1): Handle modeless volatile bitfields.
	* ira.c (setup_pressure_classes): Fix thinko in assert.
	* tree-cfg.c (execute_warn_function_return): Do not issue a
	warning about a returning function if asked not to.
	* config/mips/t-vr: Restructure multilibs.

2014-02-03  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (mn10300_register_move_cost): Prevetn
	moves via extended registers in MN10300 mode.

2013-12-18  Nick Clifton  <nickc@redhat.com>

	* configure.ac: Remove -wno-overlength-strings warning - it is not
	supported in the MinGW build environment.
	* configure: Regenerate.

2013-12-13  DJ Delorie  <dj@redhat.com>

	* config/rl78/rl78-expand.md (one_cmplqi2): Make constant signed.

2013-11-14  DJ Delorie  <dj@redhat.com>

	* config/rx/rx.c (rx_mode_dependent_address_p): Allow offsets up
	to 16 bits.

2013-10-08  Nick Clifton  <nickc@redhat.com>

	* config/rl78/rl78.c (rl78_initial_elimination_offset): Include
	guard word on stack.
	(rl78_expand_prologue): Allow for guard word.
	(rl78_expand_epilogue): Likewise.

2013-09-11  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.h (LONG_DOUBLE_TYPE_SIZE): Fix at 64-bits.
	(LIBGCC2_LONG_DOUBLE_TYPE_SIZE): Likewise.

2013-09-10  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.h (DWARF2_ADDR_SIZE): Base on POINTER_SIZE.
	(DWARF_OFFSET_SIZE): Base on DWARF2_ADDR_SIZE.
	* config/mips/mips.c: (mips_file_start): Compute the value of the
	.gcc_compiled_longXX section name from POINTER_SIZE.  Always
	generate this section, regardless of the ABI.

2013-09-04  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips_file_start): Revert previous delta.
	* config/mips/mips.h (DWARF2_ADDR_SIZE): Compute based on TARGET_LONG64.

2013-08-22  DJ Delorie  <dj@redhat.com>

	* config/rl78/rl78-expand.md (signbitsf2): New.
	(signbitdf2): New.

2013-08-21  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips_file_start): Compute the value of the
	.gcc_compiled_longXX section name from DWARF2_ADDR_SIZE.

2013-08-15  DJ Delorie  <dj@redhat.com>

	* config/rl78/rl78.c (rl78_propogate_register_origins): Handle
	clobbers of multi-byte registers correctly.

2013-08-15  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.h (TARGET_USE_FPU): Disable FPU use when using
	64-bit doubles.

2013-07-23  Kevin Buettner  <kevinb@redhat.com>

	* config/arm/unknown-elf.h (SUBTARGET_CPU_DEFAULT): Change
	default from TARGET_CPU_arm7tdmi to TARGET_CPU_arm10tdmi.

2013-07-15  Nick Clifton  <nickc@redhat.com>

	* dwarf2out.c (dwarf2out_var_location): Skip backwards over
	multiple instructions when looking for the previous call.
	* config/mips/mips.c (mips_option_override): Allow command line to
	override previous architecture selections.
	* config/mips/mips.c (ASM_SPEC): Only use default ABI if -mabi and
	-mips32 have not been specified.
	* config/mips/t-vr (MULTILIB_MATCHES): Correct definition.

	* config/aarch64/aarch64-elf-raw.h (ENDFILE_SPEC): Add -lc.
	* config/aarch64/aarch64.opt (-msim): New.

2013-06-27  Nick Clifton  <nickc@redhat.com>

	* simplify-rtx.c (simplify_subreg): Fail if given an invalid mode.

2013-06-26  DJ Delorie  <dj@redhat.com>

	* Makefile.in (site.exp): Add tool_root_dir.

2013-06-26  Nick Clifton  <nickc@redhat.com>

	* common.opt (flto-compression-level): Default to no compression
	for LTO.
	* cse.c (fold_rtx): Prevent infinite recursion.

2013-06-21  DJ Delorie  <dj@redhat.com>

	* config/s390/tpf.h (LIB_SPEC): Re-add, just for configure tests.

2013-06-20  DJ Delorie  <dj@redhat.com>

	* config/rx/rx.h (CTORS_SECTION_ASM_OP et al): Revert 3364933.

2013-06-14  DJ Delorie  <dj@redhat.com>

	* config.gcc (s390x-ibm-tpf*): Update unwind-pe.h location.

2012-10-31  Nick Clifton  <nickc@redhat.com>

	* gcc.c (driver_handle_option): Acceept OPT_shared.

2012-10-25  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.md (movsi_internal): Add alternative to
	handle moving an address register into the MDR.

2012-10-17  Nick Clifton  <nickc@redhat.com>

	Issue 3223603
	* config/rx/rx.c (rx_function_arg_boundary): Return stack
	alignment if using GCC ABI, natural alignment if using RX ABI.
	* config/rx/rx.h (TARGET_CPU_CPP_BUILTINS): Add defines of
	__RX_GCC_ABI__ or __RX_ABI__.
	(ASM_SPEC): Pass -mgcc-abi on to the assembler.
	* config/rx/rx.opt (mgcc-abi): New command line option.
	(mrx-abi): New command line option.
	* doc/invoke: Document -mgcc-abi and -mrx-abi.

2012-09-10  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.c (xstormy16_override_options):
	Suppress omit-frame-pointer when generating call exceptions.

	* config/stormy16/stormy16.md: Add peephole for below100 HI mode
	IOR operations.

2012-08-23  Nick Clifton  <nickc@redhat.com>

	* config/rl78/rl78.c (expand_prologue): Set the current stack
	size.
	(rl78_alloc_physical_register): Only check SET statements.

2012-08-07  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.c (rx_override_options_after_change): Do not warn
	about resetting the flag_finite_math_only.
	(rx_narrow_volatile_bitfield): New function.
	(TARGET_NARROW_VOLATILE_BITFIELD): Define.
	* config/rx/rx.h (STRICT_ALIGNMENT): Set to zero.
	* config/rx/rx.md: Fix spelling typo.

2012-07-31  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (mn10300_delegitimize_address): Cope
	with deleted labels.

2012-07-31  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/rs6000.c (rs6000_target_modify_macros): Do not
	claim to have quiet NaNs.

2012-07-27  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/rs6000.c (rs6000_builtin_vectorized_libmass): Fail
	if unable to construct the name of the builtin function.

2012-07-27  Nick Clifton  <nickc@redhat.com>

	Import this patch from the mainline:
	2012-04-03  Sandeep Kumar Singh  <Sandeep.Singh2@kpitcummins.com>

	* h8300/h8300.c (h8300_current_function_monitor_function_p):
	New function. Added to check monitor functions.
	* h8300/h8300.md: Generate 'rte' for monitor functions.
	* h8300/h8300-protos.h (h8300_current_function_monitor_function_p):
	Add prototype.

	* config/h8300/h8300.md (insv): Use general_operand as the
	predicate for the first operand.

	* config/m32c/m32c.c (m32c_option_override): Do not omit the frame
	pointer when generating exceptions.
	(m32c_emit_prologue): Set the current stack size.

2012-07-26  Nick Clifton  <nickc@redhat.com>

	* collect2.c (main): Remove debug hack.

	* common.opt (flto-compression-level): Initialise to 0.

	* cse.c (find_comparison_arhs): Prevent infinite looping.

	* tree-vect-data-refs.c (vect_analyze_data_refs): Import missing
	code from 4.7 branch.

	* config/frv/frv.c (frv_expand_epilogue): Enable stack usage
	reporting.
	(QUAD): Fix typo.
	* config/frv/frv.h (TARGET_CPU_CPP_BUILTINS): Assert cpu type.

	* config/stormy16/stormy16.c (xstormy16_expand_prologue): Enable
	stack usage reporting.
	(xstormy16_gimplify_va_arg_expr): Handle void types.
	(xstormy16_option_override): New function.  Prevent frame pointer
	omission when generating exceptions.
	(TARGET_OPTION_OVERRIDE): Define.

2012-07-13  Nick Clifton  <nickc@redhat.com>

	* collect2.c (main): Add extra search for installed linker.

2012-06-11  Nick Clifton  <nickc@redhat.com>

	* collect2.c (main): Add extra check for the location of the
	linker.

2012-05-30  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (REG_SAVE_BYTES): Delete.
	(mn10300_get_live_callee_saved_regs): Add bytes_saved parameter.
	Use it to return the number of bytes saved onto the stack.
	(expand_prologue): Update call to
	mn10300_get_live_callee_saved_regs.
	(expand_epilogue): Use mn10300_get_live_callee_saved_regs.
	(mn10300_initial_offset): Likewise.
	* config/mn10300/mn10300-protos.h
	(mn10300_get_live_callee_saved_regs): Update prototype.
	* config/m10300/mn10300.md (return_ret): Update call to
	mn10300_get_live_callee_saved_regs.

2012-05-24  Nick Clifton  <nickc@redhat.com>

	Import this patch from the mainline:
	2012-04-11  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.c (rx_expand_prologue): Set stack use
	information, if requested.

2012-05-16  Nick Clifton  <nickc@redhat.com>

	* config.gcc (s390x-ibm-tpf): Specify correct path to
	unwind-pe.h.

2012-05-16  Nick Clifton  <nickc@redhat.com>

	* config/h8300/h8300.h (TARGET_DEFAULT): Add MASK_H8300SX.
	* config/h8300/t-h8300 (MULTILIB_OPTIONS): Remove mh and ms.
	(MULTILIB_DIRNAMES): Remove mh8300h and mh8300s.
	(MULTILIB_EXCEPTIONS): Delete.
	* doc/invoke.texi: Document -msx option.

2012-05-11  Nick Clifton  <nickc@redhat.com>

	PR target/2951563
	* config/h8300/h8300.h (DWARF2_ADDR_SIZE): Define.

	* config/h8300/h8300.md (insv): Only accept registers as the 4th
	operand.

2012-05-11  Nick Clifton  <nickc@redhat.com>

	* dwarf2out.c (output_loc_operands): Add fix for generating large
	amounts of debug information on small address space targets.

	* dwarf2out.c (field_byte_offset): Fix handling of fields whose
	alignment is less than their size.

2012-05-10  Nick Clifton  <nickc@redhat.com>

	* simplify-rtx.c (simplify_const_unary_operation): Handle
	zero-extensions without a mode.

2012-05-10  Nick Clifton  <nickc@redhat.com>

	* config/h8300/t-h8300 (MULTILIB_EXCEPTIONS): Fix mn/mint32 exception.

2012-04-27  Nick Clifton  <nickc@redhat.com>

	* configure: Regenerate.
	* exec-tool.in: Fix typos.

2012-03-28  Nick Clifton  <nickc@redhat.com>

	* config.gcc (am33_2.0-*-linux*): Define extra_parts.

2011-12-29  Nick Clifton  <nickc@redhat.com>

	* config/mips/t-vr (TPBIT): Define.
	(tp-bit.c): Provide a build rule.

2011-12-20  Nick Clifton  <nickc@redhat.com>

	* config/mips/t-vr (MULTILIB_OPTIONS): Change to revised multilib
	selection.
	(MULTILIB_DIRNAMES, MULTILIB_MATCHES): Likewise.
	* config/mips/vr.h: Tidy.
	(SUBTARGET_LINK_SPEC): New define.
	* config/mips/mips.h (SUBTARGET_LINK_SPEC): Provide default
	definition.
	(LINK_SPEC): Include SUBTARGET_LINK_SPEC.
	(EXTRA_SPECS): Add SUBTARGET_LINK_SPEC.

2011-12-15  DJ Delorie  <dj@delorie.com>

	* config.gcc (tpf): Install unwind-pe.h.

2011-12-06  Nick Clifton  <nickc@redhat.com>

	* cfgexpand.c (expand_debug_locations): Extend assertion to allow
	differing pointer modes on targets which support multiple pointer
	types.

2011-11-16  DJ Delorie  <dj@redhat.com>

	* cvt.c (cp_convert_to_pointer): TPF issue 2554413 - Use the same
	pointer size, not a default pointer size.

2011-11-10  DJ Delorie  <dj@redhat.com>

	* config/m32c/cond.md: (cstore<mode>4_24): Avoid allowing three
	MEMs in one insn.

	* config/m32c/m32c.md (QHPSSI): New mode macro.
	* config/m32c/cond.md (cbranch<mode>4): Use it, to allow SImode
	compares where PSImode are allowed.
	(cstore<mode>4): Likewise.
	(cstore<mode>4_24): Likewise.
	(movqicc_<code>_<mode>): Likewise.
	(movhicc_<code>_<mode>): Likewise.
	* config/m32c/mov.md (movqi_op): Allow A0/A1 as QImode registers
	in moves.

2011-10-20  DJ Delorie  <dj@redhat.com>

	* config/h8300/h8300.h (DWARF2_ADDR_SIZE): Define.

2011-10-19  Nick Clifton  <nickc@redhat.com>

	* common.opt (flto-partition): Default to zero (no compression).

2011-09-09  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.md (AND split): Revert previous delta.
	* config/mn10300/mn10300.c (mn10300_split_and_operand_count):
	Return positive value when clearing low bits.

2011-09-06  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.md (AND split): Correct generation of
	replacement insns.

2011-08-02  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.md: Import splitter fixes from devo.

2011-06-28  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.h (LINK_SPEC): Do not use linker
	relaxation when performing an incremental link.

2011-06-25  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.md (clzsi2): Remove unused const_int 0.
	(bsch): Remove unused second operand.
        Initialise bit search starting position.
        Convert	located bit position into a zero count.

2011-06-21  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (REG_SAVE_BYTES): Delete.
	(mn10300_get_live_callee_saved_regs): Return number of bytes to be
	saved.
	(mn10300_expand_epilogue): Use mn10300_get_live_callee_saved_regs
	to compute number of bytes to pop.
	(mn10300_initial_offset): Use mn10300_get_live_callee_saved_regs
	to compute number of bytes to skip over in frame.
	* config/mn10300/mn10300-protos.h
	(mn10300_get_live_callee_saved_regs): Update prototype.

2011-06-16  Nick Clifton  <nickc@redhat.com>

	* config/v850/v850.h (CPP_SPEC): Add __v850e__.

2011-05-11  Nick Clifton  <nickc@redhat.com>

	* ipa.c (cgraph_externally_visible_p): Disable linker unused
	symbol detection when running in LTO mode as this breaks building
	custom executables.  cf. Issue 2025323

2011-04-27  DJ Delorie  <dj@redhat.com>

	* config/rx/rx.c (rx_align_for_label): Take label and usage
	threshold.
	* config/rx/rx-protos.h (rx_align_for_label): Likewise.
	* config/rx/rx.h (JUMP_ALIGN, LABEL_ALIGN, LOOP_ALIGN): Add.

2011-04-21  Nick Clifton  <nickc@redhat.com>

	* config/arm/t-linux-eabi (MULTILIB_OPTIONS): Add -march-armv7-a.
	(MULTILIB_DIRNAMES): Add armv7
	(MULTILIB_MATCHES): Define.

2011-03-16  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.c (rx_is_restricted_memory_address): Add range
	checking for REG+INT addressing.
	(rx_print_operand_address): Add support for UNSPEC_CONSTs.
	(rx_promote_function_mode): New function.
	(rx_get_stack_layout): Do not save call-clobebred registers in
	leaf interrupt handlers.
	(gen_prologue_add): Rename to gen_safe_add.  Use UNSPEC_CONSTs.
	(valid_psw_flag): New function.
	* config/rx/rx.md (abssi2): Use ZS mode not ZSO mode.

	Issue 1866673
	* config/rx/rx.h (MEMORY_MOVE_COST): Reduce cost of loads.

2011-03-15  Nick Clifton  <nickc@redhat.com>

	Issue 1860233
	* config/rx/rx.c (rx_print_operand): Add support for %R.  Fix
	range checks for %Q.
	* config/rx/predicates.md (rx_restricted_mem_op): New predicate:
	Calls rx_is_restricted_memory_address.
	* config/rx/rx.md: Add peepholes to combine extending loads and
	arithmetic operations.

2011-03-11  Nick Clifton  <nickc@redhat.com>

	Issue 1860193
	* config/rx/rx.c (rx_align_for_label): Use single byte alignment
	when optimizing for size.

2011-03-11  Nick Clifton  <nickc@redhat.com>

	Issue 1860163
	* config/rx/rx.c (rx_is_legitimate_address): Allow QI and HI modes
	to use predecrement and postincrement addressing.

2011-03-10  Nick Clifton  <nickc@redhat.com>

	Isue 1860203
	* config/rx/rx.md (andsi3): Fix timing of three operand alternative.

2011-03-10  Nick Clifton  <nickc@redhat.com>

	Issue 1860213
	* config/rx/rx.md (bset, bclr): Fix latency timings.

2011-03-08  DJ Delorie  <dj@redhat.com>

	* config/rx/rx.c (rx_legitimize_address): Remove debug statement.

2011-02-16  Nick Clifton  <nickc@redhat.com>

	* expr.c (expand_assignment): Narrow accesses to volatile
	bitfields in structures if wider accesses could trap.

2011-02-14  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.c (rx_expand_insv): Only allow REGs and MEMs.

2011-02-11  Nick Clifton  <nickc@redhat.com>

	Issue 1109223
	* config/rx/rx.c (rx_expand_epilogue): Do not zero-extend small
	return values when performing a sibcall.

2011-02-03  DJ Delorie  <dj@redhat.com>

	* config/rx/rx.md (cbranchsi4): Check for symbols needing PID
	encoding.
	* config/rx/rx.md (cmpsi): Likewise.

	* config/rx/rx.c (rx_pid_data_operand): Check for functions and
	labels as well as read-only data.

2011-02-02  DJ Delorie  <dj@redhat.com>

	* config/rx/constraints.md (Rpid, Rpda): New.
	* config/rx/rx-protos.h (rx_gp_base_regnum): New.
	(rx_pid_base_regnum): New.
	(rx_maybe_pidify_operand): New.
	* config/rx/rx.c (rx_gp_base_regnum): New.
	(rx_pid_base_regnum): New.
	(rx_decl_for_addr): New.
	(rx_pid_data_operand): New.
	(rx_legitimize_constant): New.
	(rx_is_legitimate_address): Add PID support.
	(rx_print_integer): Don't try to print 64-bit hex constants.
	(rx_print_operand): Add PID support.
	(rx_gen_move_template): Add PID support.
	(rx_conditional_register_usage): Add PID support.
	(rx_is_legitimate_constant): Add PID support.
	(TARGET_LEGITIMIZE_ADDRESS): New.
	* config/rx/rx.h (CPP_SPEC): Add PID, small-data, and int-register
	macros.
	(ASM_SPEC): Pass pid and int-register options.
	(PID_BASE_REGNUM): New.
	(CASE_VECTOR_PC_RELATIVE): New.
	(JUMP_TABLES_IN_TEXT_SECTION): True in PID mode.
	* config/rx/rx.md (UNSPEC_PID_ADDR): New.
	(tablejump): Use pc-rel for PID too.
	(mov<mode>): Support PID mode.
	(mov<mode>_internal): Support PID mode.
	(addsi3): Support PID mode.
	(pid_addr): New.
	* config/rx/rx.opt: Add -mpid.
	* config/rx/t-rx: Add -mpid/pid multilib.

2011-01-25  Nick Clifton  <nickc@redhat.com>

	Issue i1697683
	* config/rx/rx.c (ok_for_max_constant): New function.
	(gen_prologue_add): New function.
	(rx_expand_prologue): Use gen_prologue_add.
	(rx_expand_epilogue): Use gen_prologue_add.
	(rx_is_legitimate_constant): Allow prologue constants.
	* rtl.h (RTX_FRAME_RELATED_P): Allow to be set on CONST_INTs.

2011-01-05  Nick Clifton  <nickc@redhat.com>

	* config/mips/vr4120-div.S: Add weak __divdi3 symbol.

2010-11-16  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.c (rx_is_ms_bitfield_layout): Return false if the
	record is packed.

2010-11-10  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.h (ASM_SPEC): Pass -O to gas when -mips16 and
	-g are used together.  This disables dealy slot filling which
	ensures correct line number generation.

2010-11-10  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips16_gp_pseudo_reg): Set the location of
	the emitted insn to unknown, so that it does not corrupt debugging
	line number information.

2010-11-05  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.c
	(xstormy16_asm_output_aligned_common): Check for a NULL decl.
	(xstormy16_emit_cbranch): Add a jump_label to the jump.
	(xstormy16_function_arg_advance): Stop advanceing once an argument
	that has to be passed on the stack is encountered.
	* config/stormy16/stormy16.h (OVERRIDE_OPTIONS): Define.  Suppress
	loop unrolling.
	(PROMOTE_MODE): Remove definition.
	(OVERRIDE_OPTIONS): Disable loop unrolling.

	* expr.c (expand_assignment): Do not adjust the address of BLKmode
	fields.

	* config/mn10300/mn10300.c (mn10300_override_options): In PIC mode
	make the default processor type be the AM33.

2010-11-03  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips_override_options): Suppress warning
	about isa variants.  This allows more gcc tests to pass.

2010-09-08  Nick Clifton  <nickc@redhat.com>

	Issue 1340573
	* config/mn10300/constraints.md (R): Check for any reference to
	the stack pointer regnum, not just equality with
	stack_pointer_rtx.
	(T): Likewise.

2010-09-07  DJ Delorie  <dj@redhat.com>

	[Issue 1337103]
	* expr.c (get_inner_reference): Make bitfield test more
	aggressive.

2010-09-03  Nick Clifton  <nickc@redhat.com>

	* ipa.c (cgraph_remove_unreachable_nodes): Remove part of previous
	delta in order to fix problems with other toolchains.

2010-09-01  Nick Clifton  <nickc@redhat.com>

	* config/rx: Synchronise files with sources on renesas-10r1 branch.

2010-08-26  Nick Clifton  <nickc@redhat.com>

	Import [some of] this patch from the mainline:
	2010-05-12  Jan Hubicka  <jh@suse.cz>

	* cgraph.h (struct varpool_node): Add aux.
	* varasm.c (find_decl_and_mark_needed): Force output of varpool nodes.
	* varpool.c (varpool_remove_node): Do not remove initializer.
	(varpool_reset_queue): Export.
	(varpool_finalize_decl): Volatile vars are forced to be output.
	* lto-symtab.c (lto_varpool_replace_node): Clear out initializer of
	replaced decl.
	* ipa.c (enqueue_cgraph_node, enqueue_varpool_node,
	process_references, varpool_can_remove_if_no_refs): New functions.
	(cgraph_remove_unreachable_nodes): Handle variables too.

2010-08-26  Nick Clifton  <nickc@redhat.com>

	* version.c: Add details of GNUPro, GDB. Newlib and Binutils
	versions.

2010-07-14  DJ Delorie  <dj@redhat.com>

	Replace previous patch with...
	* config/rx/predicates.md (rx_constshift_operand): New.
	(rx_onebit_operand): New.
	* config/rx/rx.md (zs_cond): New.
	(*tstbranchsi4_<code>): New.
	(*tstbranchsi4_<code>): New.
	(*tstbranchsi4b_eq): New.
	(*tstbranchsi4m_eq): New.
	(*tstbranchsi4m_ne): New.
	(*tstbranchsi4a_ne): New.
	(*tstbranchsi4a_eq): New.

2010-07-02  DJ Delorie  <dj@redhat.com>

	* rtlanal.c (canonicalize_condition): Avoid non-condition RTL.
	* final.c (shorten_branches): Expose insn as label for align macros.

	* config/rx/constraints.md (Rreg, Rd05, Rd08): New.
	* config/rx/rx.md (zs_cond): New.
	(*tstbranchsi4_<code>): New.
	(*tstbranchsi4b_eq): New.
	(*tstbranchsi4b_ne): New.
	(*mov<register_modes:mode>_internal): Add more constraints so as
	to set length more accurately.

	* config/rx/rx-protos.h (rx_align_for_label): New.
	(rx_max_skip_for_label): New.
	* config/rx/rx.h (JUMP_ALIGN, JUMP_ALIGN_MAX_SKIP,
	LABEL_ALIGN_AFTER_BARRIER, LOOP_ALIGN, LOOP_ALIGN_MAX_SKIP,
	LABEL_ALIGN, LABEL_ALIGN_MAX_SKIP): New.
	(ASM_OUTPUT_MAX_SKIP_ALIGN): New.
	* config/rx/rx.c (rx_align_for_label): New.
	(rx_skip_for_label): New.

2010-06-18  Nick Clifton  <nickc@redhat.com>

	* config/rx/predicates.md (rx_source_operand): Allow any kind of
	const, not just const_int.
	* config/rx/rx-protos.h (rx_gen_addsi3_without_cc_clobber): Delete
	prototype.
	* config/rx/rx.c (rx_print_operand): Allow %H and %L to handle
	const_doubles.
	(rx_expand_prologue): Remove use of special addsi3 insns.  Remove
	blockage.
	(rx_expand_epilogue): Remove use of special addsi3 insns.
	(rx_gen_addsi3_without_clobber): Delete.
	* config/rx/rx.md (UNSPEC_BLOCKAGE): Delete.
	(cbranchsi4): Replace splits insn with a single insn.
	(cbranchsf4): Likewise.
	(cbranchsi4_<cond>): New splits.
	(cbranchsf4_<cond>): New splits.
	(cmpsf): Use with -fnon-call-exceptions.
	(addsi3): Restore to being an ordinary define_insn. Add
	alternative for reversed registers.
	(blockage): Delete.

2010-06-04  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.h (MEMORY_MOVE_COST): Define.
	(BRANCH_COST): Define.
	(REGISTER_MOVE_COST): Define.

2010-06-04  Nick Clifton  <nickc@redhat.com>

	* target.h (struct gcc_target): Add cc_status_allows_insn_deletion.
	* target-def.h (TARGET_CC_STATUS_ALLOWS_INSN_DELETION): Define.
	(TARGET_INITIALIZER): Add TARGET_CC_STATUS_ALLOWS_INSN_DELETION.
	* targhooks.c (default_cc_status_allows_insn_deletion): New
	function.
	* targhooks.h (default_cc_status_allows_insn_deletion): Prototype.
	* final.c (final_scan_insn): Call cc_status_allows_insn_deletion.
	* config/rx/rx.c (rx_notice_update_cc): Correctly set cc_status.
	value1.
	(rx_cc_status_allows_insn_deletion): New function.
	(TARGET_C_STATUS_ALLOWS_INSN_DELETION): Define.
	* config/rx/rx.md (attr cc): Add set_zsc.
	(tablejump): Clobber the cc attribute.
	(simple_return, deallocate_and_return, pop_and_return)
	(fast_interrupt_return, exception_return, call_internal)
	(call_value_internal, sibcall_internal, sibcall_value_internal)
	(cstoresi4, movsieq, movsine): Likewise.
	(addsi3): Change cc attribute to set_zsc as the overflow bit
	cannot be trusted.
	(adddi3, subsi3, subdi3): Likewise.
	* config/rx/rx.h (CONSTANT_ADDRESS_P): Define.

2010-06-02  Nick Clifton  <nickc@redhat.com>

	Import this patch from the mainline:

	2010-04-27  Dave Korn  <dave.korn.cygwin@gmail.com>

	* collect2.c (scan_prog_file): allow for LTO info marker
	symbol to be prefixed or not by an extra underscore.

2010-06-02  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/crtsavgpr.asm: Add missing functions.
	* config/rs6000/crtresxgpr.asm: Add missing functions.

2010-06-01  Nick Clifton  <nickc@redhat.com>

	* config/rx/rx.h (PTRDIFF_TYPE): Define.

2010-05-21  Nick Clifton  <nickc@redhat.com>

	Import this patch frin the mainline:

	2010-04-20  James E. Wilson  <wilson@codesourcery.com>

	PR rtl-optimization/43520
	* ira-lives.c (ira_implicitly_set_insn_hard_regs): Exclude classes with
	zero available registers.

2010-05-13  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/t-crtsavres: New.  Adds rules to include the
	register save/restore functions to libgcc.
	* config.gcc (powerpc-eabi): Add t-crtsavres to tmake_file list.
	(powerpc-eabispe): Likewise.

2010-05-11  DJ Delorie  <dj@redhat.com>

	* config/arm/elf.h (SUBTARGET_EXTRA_ASM_SPEC): Always tell gas
	which float-abi to use.

	* config.gcc (sh-elf): Add in GES-specific multilibs.

2010-05-06  DJ Delorie  <dj@redhat.com>

	* gcc.c (LINK_COMMAND_SPEC): Don't pass -v switch on to linker.

2010-04-30  DJ Delorie  <dj@redhat.com>

	Import:
	2010-04-19  Richard Guenther  <rguenther@suse.de>
	* configure.ac: Fix quoting around elf_getshstrndx ABI check.
	* configure: Re-generated.

2010-04-28  DJ Delorie  <dj@redhat.com>

	Import:
	2010-04-10  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>
	* configure.ac: Check for elf_getshdrstrndx or elf_getshstrndx
	flavor.
	* configure: Regenerate.
	* config.in: Regenerate.

2010-04-20  Nick Clifton  <nickc@redhat.com>

	Issue 778793
	* config/mn10300/mn10300.c (TARGET_DEFAULT_TARGET_FLAGS): Use
	TARGET_DEFAULT_TARGET_FLAGS_MN10300 if defined.
	* config/mn10300/linux.h (TARGET_DEFAULT_TARGET_FLAGS_MN10300):
	Define.

2010-04-13  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.md (arm_rev): Only allow for ARM and THUMB2 targets.
	(bswapsi2): Use legacy pattern for armv6 non-thumb2 targets.

2010-04-13  DJ Delorie  <dj@redhat.com>

	* cfgexpand.c (expand_debug_expr): Check for mismatched modes
	in POINTER_PLUS_EXPR and fix them.

2010-03-17  Nick Clifton  <nickc@redhat.com>

	* gcc/common.opt (fuse-ld): New, undocumented option.
	* gcc/exec-tool.in: Use -fuse-ld=gold/bfd.
	* gcc/gcc.c(LINK_COMMAND_SPEC): Convert -fuse-ld=gold/bfd into
	-use-gold or -use-ld.
	* gcc/opts.c: Ignore -fuse-ld.
	* gcc/doc/invoke.texi: Document -fuse-ld=gold/bfd.

	* gcc/config/arm/t-arm-elf (LIBGCC2_CFLAGS): Add -flto.
	* gcc/config/i386/t-crtstuff: Likewise.
	* gcc/config/sparc/t-elf: Likewise.

2010-03-03  Nick Clifton  <nickc@redhat.com>

	* configure.ac: (gcc_cv_ld_gold): Define.  If gold exists in the
	source and build trees, set to the gold linker in the build tree.
	(ORIGINAL_GOLD_FOR_TARGET): Substitute in the value of
	gcc_cv_ld_gold.
	* configure: Regenerate.
	* exec-tool.in: Add support for GOLD.
	Add support for fake linker command line switches -Luse-gold and
	-Luse-ld which are used to select the desired linker.
	Add support for displaying the command executed if the command
	line contains the -v switch.
	* collect2.c: Likewise.
	* gcc.c (LINK_COMMAND_SPEC): Pass -v switch on to linker.
	* gcc/config/rs6000/sysv4.h (LINK_SPEC): Do not convert -v into -V.

2009-10-21  Kevin Buettner  <kevinb@redhat.com>

	* config/mn10300/mn10300.c (mn10300_gen_multiple_store): Use
	offsets based upon SP's initial value, not its updated value.
	(store_multiple_operation): Likewise.

2009-10-21  Kevin Buettner  <kevinb@redhat.com>

	* dwarf2out.c (dwarf2out_frame_init): Call initial_return_save()
	when DWARF2_FRAME_INFO is defined.
	* config/mn10300/mn10300.h (ARG_POINTER_CFA_OFFSET): Define.
	(INCOMING_FRAME_SP_OFFSET): Redefine.

2009-10-21  DJ Delorie  <dj@redhat.com>

	* config/mn10300/mn10300-protos.h (mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.c (F): New.
	(movm_reg_order): New.
	(mn10300_gen_multiple_store): Order stores correctly, fix address calculations.
	(expand_prologue): Mark all frame-related insns.
	(store_multiple_operation): Don't require monotonically increasing
	register numbers.
	(mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.h (INCOMING_RETURN_ADDR_RTX): Define.
	(INCOMING_FRAME_SP_OFFSET): Define.
	(DWARF2_UNWIND_INFO): Define.

2009-10-13  DJ Delorie  <dj@redhat.com>

	* config/h8300/h8300.c (F): New.
	(Fpa): New.
	(h8300_emit_stack_adjustment): Call them.
	(push): Likewise.
	(h8300_expand_prologue): Likewise.
	* config/h8300/h8300.h (DWARF2_DEBUGGING_INFO): Define.
	(MUST_USE_SJLJ_EXCEPTIONS): Define.
	(INCOMING_RETURN_ADDR_RTX): Define.
	(INCOMING_FRAME_SP_OFFSET): Define.
	(DWARF_CIE_DATA_ALIGNMENT): Define.

2009-09-30  Mark Salter  <msalter@redhat.com>

	* config.gcc (am3*-*-linux): Remove extra_parts - they are not
	needed.

2009-07-16  DJ Delorie  <dj@redhat.com>

	* config/m32c/m32c.c (m32c_compare_redundant): Avoid removing
	compares that may be indirectly affected by previous instructions.

2009-07-16  Nick Clifton  <nickc@redhat.com>

	* config/mips/vr.h (MULTILIB_ABI_DEFAULT): Define.

2009-07-08  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.c (arm_hard_regno_mode_ok): Allow reg7 to be used
	in Thumb mode.

2009-06-11  Nick Clifton  <nickc@redhat.com>

	* configure.ac: Force the use of sjlj exceptions for the IQ2000
	port.
	* configure: Regenerate.

2009-05-08  Nick Clifton  <nickc@redhat.com>

	* configure.ac: Enable setjmp/longjmp exception handling for the
	FRV as DWARF2 based unwinidning is not working properly.
	* configure: Regenerate.

2009-05-07  Nick Clifton  <nickc@redhat.com>

	* Reapply this patch:
	2006-06-13  DJ Delorie  <dj@delorie.com>

	* config/v850/v850.h (DWARF2_FRAME_INFO): Define.
	(DWARF2_UNWIND_INFO): Define.
	(INCOMING_RETURN_ADDR_RTX): Define.
	(DWARF_FRAME_RETURN_COLUMN): Define.
	* config/v850/v850.c (F): New.
	(v850_all_frame_related): New.
	(expand_prologue): Mark frame-related insns.

2009-05-07  Nick Clifton  <nickc@redhat.com>

	* DEV-PHASE: Change from "experimental" to blank.

2009-05-06  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.c (arm_override_options): Move parsing of
	target_float_abi_name parameter to before parsing of
	target_fpu_name paramter.  If target_fpu_name has not been
	specified by the user then do not allow the default fpu
	architecture selected to conflict with the float abi selected.
	(arm_expand_neon_args): When expanding NEON_ARG_COPY_TO_REG, if
	the modes differ generate a SUBREG to handle the mode conversion.

	* config/arm/elf.h (ASM_SPEC): Always pass -mfloat-abi=soft to the
	assembler unless a different ABI has been specified by the user.
	* config/arm/t-arm-elf: Enable hard-float and soft-float
	multilibs.

2009-04-24  DJ Delorie  <dj@redhat.com>

	* config/sh/sh.h (LIBGCC2_DOUBLE_TYPE_SIZE): Test
	__SH2A_SINGLE_ONLY__ also.

2009-04-23  DJ Delorie  <dj@redhat.com>

	* config.gcc: Enable m4-nofpu and m2a-nofpu multilibs.

2009-04-24  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.h (USER_LABEL_PREFIX): Define.

2009-04-24  Nick Clifton  <nickc@redhat.com>

	* config/iq2000/iq2000.c (function_arg): Handle TImode values.
	(function_arg_advance): Likewise.
	* config/iq2000/iq2000.md (movsi_internal2): Fix the length of the
	5th alternative.

2009-04-23  Nick Clifton  <nickc@redhat.com>

	* config/frv/frv.c (frv_frame_access): Do not use reg+reg
	addressing for DImode accesses.
	(frv_print_operand_address): Handle PLUS case.
	* config/frv/frv.h (FIXED_REGISTERS): Mark link register as
	fixed.

2009-04-22  Nick Clifton  <nickc@redhat.com>

	* config/v850/v850.md (return): Rename to return_simple and remove
	test of frame size.
	* config/v850/v850.c (expand_epilogue): Rename call to gen_return
	to gen_return_simple.

2009-04-16  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.h (DONT_USE_BUILTIN_SETJMP): Suppress.

2009-04-14  Nick Clifton  <nickc@redhat.com>

	* config/h8300/t-h8300 (MULTILIB_EXCEPTIONS): Fix specification of
	mn/mint32 exception.

2009-04-14  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.md (ineqbranch_1): Fix for 64-bit hosts
	- do not handle small integers in the second alternative.
	* config/stormy16/stormy16.c (xstormy16_emit_cbranch): Add a
	label and branch count to generated jump insn.

2009-04-07  Nick Clifton  <nickc@redhat.com>

	* optabs.c (gen_add2_insn): Return NULL_RTX upon failure.

2009-01-02  Nick Clifton  <nickc@redhat.com>

	* config/frv/frv.c (frv_print_operand): Replace call to isalpha
	with abn invocation of the ISALPHA macro.

2008-12-11  DJ Delorie  <dj@redhat.com>

	* config/h8300/genmova.sh: Apply %C2 suffix (:16 or :32) to
	address offset.
	* config/h8300/h8300.c (print_operand): Add %C modifier.
	* config/h8300/mova.md: Regenerate.

2008-12-02  Nick Clifton  <nickc@redhat.com>

	Import this patch from FSF:

	2008-12-01  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.md (CARRY_REG): New constant.
	Replace uses of the "y" register class with direct references to
	the CARRY_REG register.
	(reload_inhi): Delete pattern.
	* config/stormy16/stormy16.c: Replace clobbers of a BImode scratch
	register with clobbers of the carry register.
	(xstormy16_secondary_reload_class): Do not return CARRY_REGS.
	(xstormy16_split_cbranch): Remove redundant carry parameter.
	(xstormy16_expand_arith): Likewise.
	* config/stormy16/stormy16.h (enum reg_class): Remove CARRY_REGS.
	(IRA_COVER_CLASSES, REG_CLASS_NAMES, REG_CLASS_CONTENTS,
	REGNO_REG_CLASS, REG_CLASS_FROM_LETTER): Likewise.
	(CARRY_REGNUM): Define.
	* config/stormy16/stormy16-protos.h (xstormy16_split_cbranch):
	Update prototype.
	(xstormy16_expand_arith): Likewise.

2008-12-01  DJ Delorie  <dj@redhat.com>

	* config/stormy16/stormy16.h (INCOMING_FRAME_SP_OFFSET): Negate.
	(DWARF_CIE_DATA_ALIGNMENT): Define.

	* config/stormy16/stormy16.c (xstormy16_compute_stack_layout):
	Invert add/sub for INCOMING_FRAME_SP_OFFSET.
	(xstormy16_expand_prologue): Likewise.
	(xstormy16_expand_builtin_va_start): Likewise.
	(xstormy16_gimplify_va_arg_expr): Likewise.

2008-11-18  DJ Delorie  <dj@redhat.com>

	* expmed.c (store_bit_field_1): Use simplify_gen_subreg() to
	create and validate subregs.

	* config/m32c/jump.md (untyped_call): New.
	* config/m32c/m32c.md (UNS_BLOCKAGE): New.
	(blockage): New.
	* config/m32c/mov.md (extendhipsi2): New.
	(zero_extendqihi2): disparage Rhl for reg alloc.

	[pending]
	2008-11-14  Richard Guenther  <rguenther@suse.de>
	* tree.c (build2_stat): Allow non-POINTER_PLUS_EXPRs with
	non-sizetype offsets if their precision matches that of
	the pointer.
	* expr.c (expand_expr_real_1): Always sign-extend the offset
	operand of a POINTER_PLUS_EXPR.

2008-11-12  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (CONDITIONAL_REGISTER_USAGE): Revert
	previous delta.  Instead import this patch from the FSF mainline:

	2008-10-28  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.h (CALL_REALLY_USED_REGISTERS): Define.
	* config/mn10300/mn10300.c (fp_regs_to_save): Test the
	call_really_used_regs array rather than the call_used_regs array.
	(mn10300_get_live_callee_saved_regs, expand_prologue,
	expand_epilogue, output_tst): Likewise.

2008-10-23  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.h (CONDITIONAL_REGISTER_USAGE): In pic
	mode remove the pic register from the allocation list so that it
	cannot be used by gcc.  Do not make it fixed as this stops it from
	being call-saved, which is needed for compatability with non-pic
	object files.

2008-10-21  Nick Clifton  <nickc@redhat.com>

	* config/frv/frv.h (HARD_REGNO_RENAME_OK): Define.  Do not allow
	renaming to the PIC register in fdpic mode.

2008-10-21  Nick Clifton  <nickc@redhat.com>

	* config/iq2000/iq2000.c (function_arg): Handle TImode values.
	(function_arg_advance): Likewise.
	(iq2000_expand_eh_return): Delete unused locals.
	(iq2000_can_use_return_insn): Do not allow when the function may
	call an exception handler.
	* config/iq2000/iq2000.h (EH_RETURN_HANDLER_RTX): Redefine in
	terms of RETURN_ADDR_RTX.
	* config/iq2000/iq2000.md (mosi_internal): Increase the length of
	the 5th alternative in case a nop instruction has to be inserted.
	(eh_return_internal): Return using r31.
	(eh_return): Suppress pattern.

2008-09-10  Nick Clifton  <nickc@redhat.com>

	* config/iq2000/iq2000.h (LINK_SPEC): Enable section garbage
	collection.

2008-08-13  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (legitimate_address_p): Only accept
	REG+CONST addresses in PIC mode if the mode size is 4.

2008-08-05  Nick Clifton  <nickc@redhat.com>

	* config/arm/t-arm-elf-mlibs: Reorder hard/soft mlibs.
	* config/arm/elf.h (MULTILIB_DEFAULTS): Make hard fp the default.

2008-08-04  Kevin Buettner  <kevinb@redhat.com>

	* config/m32c/prologue.md (prologue_enter_16): Set FB to SP - 2.
	prologue_enter_32): Set FB to SP - 4.

2008-08-04  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.c (xstormy16_emit_cbranch): Set the
	JUMP_LABEL for the branch insn and increment the use count of the
	destination label.

2008-08-02  Kevin Buettner  <kevinb@redhat.com>

	* config/mn10300/mn10300.c (mn10300_gen_multiple_store): Use
	offsets based upon SP's initial value, not its updated value.
	(store_multiple_operation): Likewise.

2008-07-24  Nick Clifton  <nickc@redhat.com>

	* config/iq2000/iq2000.h (INITIALIZE_TRAMPOLINE): Remove spurious
	escaped newline.
	* config/iq2000/iq2000.md (tablejump): Remove spurious invocation
	of gen_tablejump_internal2.
	(indirect_jump): Remove spurious invocation of
	gen_indirect_jump_internal2.
	(call_internal1): Add mode for operand 0.
	(call_value_internal1): Add mode for operand 1.
	(call_value_multiple_internal1): Add mode for operand 1.
	(andsi3 insn): Call gcc_unreachable if an unhandled alternative is
	encountered.
	(movsf_high): Likewise.

2008-07-23  Nick Clifton  <nickc@redhat.com>

	* doc/invoke.texi (-foptimize-local-statics): Document case where
	this optimization does not work.

2008-07-22  Nick Clifton  <nickc@redhat.com>

	* tree-optimize-local-statics.c (is_local_static_var): Skip
	statics whose address is taken.

2008-07-14  Nick Clifton  <nickc@redhat.com>

	* params.def (few-registers-hoist-cost): Define.
	(no-registers-hoist-cost): Define.
	* cfgloopanal.c (init_set_costs): Use few-registers-hoist-cost and
	no-registers-hoist-cost.
	* doc/invoke.texi: Document the new params.

2008-07-08  Nick Clifton  <nickc@redhat.com>

	* tree-optimize-local-statics.c (scan_pending_list): Fixed order
	of parameters passed to dominated_by_p.
	(process): Catch another opportunity for applying this opportunity
	where a DEF can be ignored because it is dominated by another DEF.

2008-07-03  DJ Delorie  <dj@redhat.com>

	* config/s390/tpf.h (TARGET_DEFAULT): Remove MASK_HARD_FLOAT as it
	is the default now (MASK_SOFT_FLOAT disables).

2008-06-13  Nick Clifton  <nickc@redhat.com>

	* tree-into-ssa.c (initialize_flags_in_bb): Suppress check for
	unmodified treatements - it is triggered by some of the EEMBC
	tests and it does not appear to be needed.

2008-05-15  Nick Clifton  <nickc@redhat.com>

	* config/mips/vr4120-div.S: Provide weak aliases (__divdi3 and
	__moddi3) for the vr4120 functions (__vr4120_divsi3 and
	__vr4120_modsi3) for use when the vr4120 is using 64-bit
	multilibs.

2008-05-07  Nick Clifton  <nickc@redhat.com>

	* config/mips/t-vr (MULTILIB_MATCHES): Make -mvr4120 match the
	vr4120 multilibs.

2008-04-24  Nick Clifton  <nickc@redhat.com>

	* configure.ac (gcc_c_include_dir): Compute & substitute.
	* Makefile.in (gcc_c_include_dir): Define.
	(PREPROCESSOR_DEFINES): Use gcc_c_include_dir for
	TOOLS_INCLUDE_DIR instead of gcc_tooldir.
	* configure: Regenerate.

2008-04-16  Nick Clifton  <nickc@redhat.com>

	* tree-optimize-local-statics.c (locate_and_convert_statics): Add
	support for GIMPLE_MODIFY_STMT statements.
	(process): New function.
	* doc/invoke.texi (slo-local-variables-threshold): Document.

2008-04-09  Nick Clifton  <nickc@redhat.com>

	Install Red Hat local patches:

	* config/arm/t-arm-elf: Enable multilibs for big-endian,
	hard-float and interworking.

	* Makefile.in: Stop the installation of gccbug - it is not
	needed.

	* config/arm/t-arm-elf (MULTILIB_OPTIONS): Add "armv5t".
	(MULTILIB_DIRNAMES): Add "v5".
	(MULTILIB_EXCEPTIONS): Exclude hard-float from v5 multilibs since
	hard-float uses v4 FPA instructions.
	(MULTILIB_MATCHES): Add v5 architectures and cores.

	* config.gcc: Add arm*-softvfp-linux-gnu target.
	* config/arm/linux-elf-soft.h: New file: Support a software FP
	Linux target.
	* config/arm/t-soft-linux: New file.

	* config.gcc (sparc64-*): Do not produce 32-bit multilibs.
	* config/sparc/sol2-64.h (MD_EXEC_PREFIX, MD_STARTFILE_PREFIX):
	Define 64-bit versions if svr4.h has defined 32-bit versions.

	* config.gcc: Add Support for armv5-elf and armv6-elf targets.
	* config/arm/t-arm-elf-no-hardfp: New.

	* config.gcc (arm-eabi): Use modified t-arm-elf file that does not
	install multilibs.
	(arm-elf, arm-linux): Use modified linux-elf.h header file for
	big-endian builds.

	* gcc.c (translate_options): If the environment variable
	GCC_DEFAULT_OPTIONS is defined, prepend its contents to the
	command line that is about to be translated.
	(main): When displaying information for the -v (verbose) command
	line switch, also report the contents of the GCC_DEAULT_OPTIONS
	environment variable.

	* doc/invoke.texi: Document the behaviour of GCC_DEFAULT_OPTIONS.

	* gcc.c (get_default_options_name): New function.  Returns the
	name of the environment variable that might contain default
	switches for gcc.
	(get_default_options): New function.  Return any default options
	set by environment variables.
	(translate_options): Use get_default_options.
	(main): Use get_default_options_name.  Display the name of the
	default options environment variable even if it is empty so that
	the user has feedback on its existance.

	* doc/invoke.texi: Document the fact that different envrionment
	variables are used for cross compiler default options and native
	compiler default options.
	* doc/tm.texi (TARGET_CROSS_GCC_DEFAULT_OPTIONS): Document the
	existance of this target macro.

	* config/mn10300/mn10300.h (TARGET_CROSS_FCC_DEFAULT_OPTIONS):
	Define.

	* config/v850/v850.h (PREFERRED_DEBUGGING_TYPE): Redefine to be
	DWARF2_DEBUG.

	* config/i386/cygming.h: Honour inhibit_libc
	* config/i386/mingw32,h (CPP_SPEC): Import code to support
	-mno-win32 and -mno-cygwin from cygwin.h, but make the default be
	-mwin32.

	PR 68696 [Revised again]
	* config/mn10300/mn10300.h (MOVE_RATIO): Restore previous
	defintion.
	(TARGET_BLOCK_MOVE_MAY_USE_LIBCALL): Define.
	* expr.c (emit_block_move): If TARGET_BLOCK_MOVE_MAY_USE_LIBCALL
	is defined allow it to override the computed value for
	may_use_libcall.

	* gcc.c	(STANDARD_STARTFILE_PREFIX_3): Provide a default
	definition of "/usr/local/lib".
	(standard_startfile_prefix_3): Define.
	(main): Use standard_startfile_prefix_3.

	* config/arm/lib1funcs.asm: Generate interworking stubs for v5 and
	v6 builds as well.

	* config/v850/v850.h (ASM_SPEC): Re-add -mrelax.
	* config/v850/v850.opt: Add -mrelax and -mlong-jumps.

	* config/iq2000/iq2000.h (PAD_VARARGS_DOWN): Fix big-endian padding.

	* config/v850/v850.h (DWARF2_FRAME_INFO): Define.
	(DWARF2_UNWIND_INFO): Define.
	(INCOMING_RETURN_ADDR_RTX): Define.
	(DWARF_FRAME_RETURN_COLUMN): Define.
	* config/v850/v850.c (F): New.
	(v850_all_frame_related): New.
	(expand_prologue): Mark frame-related insns.

	* config/iq2000/iq2000.c (function_arg): 32 bit reals in a
	structure can go in an SFmode register, not DFmode.
	* config/iq2000/iq2000.h: Disable trampolines.
	* config/iq2000/iq2000.md (rotrsi3): Split into expand and insn.
	(rotrsi3_i): New.  Use only for constant rotations.
	* config/iq2000/predicates.md (small_uns_int_operand): New.

	* config/iq2000/iq2000.c (iq2000_expand_eh_return): Copy EH return
	address to $26, not the stack.

	* config/s390/t-tpf (EXTRA_HEADERS): Define.

	* Makefile.in (OBJS-common): Add tree-optimize-local-statics.c
	* common.opt: Add -foptimize-local-statics.
	* params.def: Add PARAM_SLO_LOCAL_VARIABLE_THRESHOLD.
	* passes.c (init_optimization_passes): Add
	pass_optimize_local_statics to pass_early_local_passes.sub.
	* tree-pass.h: Declare pass_optimize_local_statics.
	* doc/invoke.texi: Document -foptimize-local-statics and
	slo-local-variables-threshold param.
	* doc/passes.texi: Document local statics pass.
	* tree-optimize-local-statics.c: New file.  Convert statics into
	autos.

	* config.gcc (sh-elf): Add sh2a-single-only multilib.

	* config/mn10300/mn10300.c (REG_SAVE_BYTES): Adjust for the PIC
	reg being call-used.

	* config/frv/t-frv: Add -mcpu=frv multilib.

	* dwarf2out.c (dwarf2out_frame_init): Save $ra for frame debugging
	also.

	* config/mn10300/mn10300-protos.h (mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.c (F): New.
	(movm_reg_order): New.
	(mn10300_gen_multiple_store): Order stores correctly, fix address calculations.
	(expand_prologue): Mark all frame-related insns.
	(store_multiple_operation): Don't require monotonically increasing
	register numbers.
	(mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.h (INCOMING_RETURN_ADDR_RTX): Define.
	(INCOMING_FRAME_SP_OFFSET): Define.
	(DWARF2_UNWIND_INFO): Define.

	* dwarf2out.c (dwarf2out_frame_init): Call initial_return_save()
	when DWARF2_FRAME_INFO is defined.
	* config/mn10300/mn10300.h (ARG_POINTER_CFA_OFFSET): Define.
	(INCOMING_FRAME_SP_OFFSET): Redefine.

2008-03-28  Nick Clifton  <nickc@redhat.com>

	Import from mainline:

	PR target/31232
	* config/stormy16/stormy16.c (xstormy16_legitimate_address_p): Do
	not allow INT+INT as a legitimate addressing mode.

2008-03-07  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (mn10300_secondary_reload_class): Use
	GENERAL_REGS for the scratch register class when performing stack
	adjustments as this matches the class in the reload_insi pattern.

2008-03-07  Nick Clifton  <nickc@redhat.com>

	* targhooks.c (default_secondary_reload): If
	default_secondary_reload is called before the optabs have been
	initialised then return NO_REGS.

2008-03-05  Nick Clifton  <nickc@redhat.com>

	* version.c (version_string): Annotate for a GNUPro release.
	* configure.ac (ACX_BUGURL): Change to GNUPro URL.
	* confgiure: Regenerate.

2007-11-07  Nick Clifton  <nickc@redhat.com>

	* config/mn10300/mn10300.c (legitimate_address_p): Only allow a
	constant pic index for SImode values.

2007-10-19  Kevin Buettner  <kevinb@redhat.com>

	* dwarf2out.c (dwarf2out_frame_init): Call initial_return_save()
	when DWARF2_FRAME_INFO is defined.
	* config/mn10300/mn10300.h (ARG_POINTER_CFA_OFFSET): Define.
	(INCOMING_FRAME_SP_OFFSET): Redefine.

2007-10-10  DJ Delorie  <dj@redhat.com>

	* dwarf2out.c (dwarf2out_frame_init): Save $ra for frame debugging
	also.

	* config/mn10300/mn10300-protos.h (mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.c (F): New.
	(movm_reg_order): New.
	(mn10300_gen_multiple_store): Order stores correctly, fix address calculations.
	(expand_prologue): Mark all frame-related insns.
	(store_multiple_operation): Don't require monotonically increasing
	register numbers.
	(mn10300_incoming_return_addr_rtx): New.
	* config/mn10300/mn10300.h (INCOMING_RETURN_ADDR_RTX): Define.
	(INCOMING_FRAME_SP_OFFSET): Define.
	(DWARF2_UNWIND_INFO): Define.

2007-10-02  DJ Delorie  <dj@redhat.com>

	* config/frv/t-frv: Add -mcpu=frv multilib.

2007-09-26  Nick Clifton  <nickc@redhat.com>

	Suppress exception handlign support until it can be fixed
	properly.
	* config/iq2000/iq2000.h: (EH_RETURN_DATA_REGNO,
	EH_RETURN_STACK_REGNO, EH_RETURN_STACK_ADJ,
	EH_RETURN_HANDLER_REGNO, EH_RETURN_HANDLER_RTX): Suppress.
	(DWARF2_UNWIND_INFO): Define to 0.
	* config/iq2000/iq2000.md (eh_return, eh_return_internal):
	Suppress.
	* config/iq2000/iq2000-protos.h (iq2000_expand_eh_return):
	Suppress.
	* config/iq2000/iq2000.c (compute_frame_size): Ignore
	exception handling.
	(iq2000_expand_epilogue): Likewise.
	(iq2000_expand_eh_return): Suppress.

2007-09-21  Nick Clifton  <nickc@redhat.com>

	* config/arm/linux-elf.h (SUBTARGET_ASM_FLOAT_SPEC): Pass
	-mfloat-abi=hard to assembler if not using -msoft-float.  Also
	pass -mfpu=fpa if -mfpu is not set on the command line.

	* config/arm/elf.h (SUBTARGET_ASM_FLOAT_SPEC): Pass
	-mfloat-abi=soft to assembler if not using -mhard-float.

2007-09-20  Nick Clifton  <nickc@redhat.com>

	* c-common.c (convert_and_check): Do not warn when converting
	a signed expression to an unsigned type that is wider than the
	signed type.

2007-08-28  DJ Delorie  <dj@redhat.com>

	* config/sh/sh.c (sh_gimplify_va_arg_expr): Fix sh2a support.

2007-08-27  DJ Delorie  <dj@redhat.com>

	* config/mn10300/mn10300.c (REG_SAVE_BYTES): Adjust for the PIC
	reg being call-used.

2007-08-24  DJ Delorie  <dj@redhat.com>

	* config/sh/sh.c (sh_gimplify_va_arg_expr): Fix sh2a support.

2007-08-23  Nick Clifton  <nickc@redhat.com>

	Issue 128195
	Patch created by Richard Sandiford.
	* config/mips/mips-protos.h (mips_address_insns): Add a boolean
	argument.
	(mips_fetch_insns): Delete in favor of...
	(mips_load_store_insns): ...this new function.
	* config/mips/mips.c (mips_address_insns): Add a boolean argument
	to say whether multiword moves _might_ be split.
	(mips_fetch_insns): Delete in favor of...
	(mips_load_store_insns): ...this new function.
	(mips_rtx_costs): Update the call to mips_address_insns.
	(mips_address_cost): Likewise.
	* config/mips/mips.md (length): Use mips_load_store_insns instead
	of mips_fetch_insns.
	* config/mips/constraints.md (R): Use mips_address_insns rather
	than mips_fetch_insns.  Assume that the move never needs to be split.

2007-08-23  Nick Clifton  <nickc@redhat.com>

	Issue 128207
	* config/mips/mips.md (truncdihi2, truncdiqi2): Delete bogus
	patterns.

2007-08-22  DJ Delorie  <dj@redhat.com>

	* config.gcc (sh-elf): Add sh2a-single-only multilib.

2007-08-15  Nick Clifton  <nickc@redhat.com>

	Issue 128204:
	* tree-ssa-live.c (compare_pairs): If the costs are the same,
	use the partition indicies in order to obtain a stable,
	reproducible sort.  Otherwise the ordering will be at the
	mercy of the host's qsort library function implementation.

2007-08-06  Nick Clifton  <nickc@redhat.com>

	* config/h8300/h8300.md (andhi3, andis3, iorhi3, iorsi3,
	xorhi3, xorsi3): Use h8300_register_or_integer_operand.

2007-08-02  DJ Delorie  <dj@redhat.com>

	* config/arm/arm.c (arm_override_options): Disable stack protector
	for now.

2007-07-25  Nick Clifton  <nickc@redhat.com>

	* config/h8300/predicates.md (h8300_register_or_integer_operand):
	New predicate.
	* config/h8300/h8300.md (logicalhi3_sn): Use it for operand 2.
	(logicalsi3_sn): Likewise.
	(logicalhi3): Likewise.
	(logicalsi3): Likewise.

2007-07-11  Nick Clifton  <nickc@redhat.com>

	* gcc.c (LINK_COMMAND_SPEC): Add specs for -fleading-underscore.

2007-07-10  Nick Clifton  <nickc@redhat.com>

	* config/m32r/m32r.h (INITIALIZE_TRAMPOLINE): Provide version
	for 64-bit hosts.

2007-06-27  Nick Clifton  <nickc@redhat.com>

	* target.h (struct gcc_target): Add target_help field.
	* target-def.h (TARGET_HELP): New.
	(TARGET_INITIALIZER): Use TARGET_HELP.
	* opts.c (command_handle_option): Invoke target_help function, if
	defined, when the user has specified --target-help on the command
	line.
	* doc/invoke.texi: Mention that --target-help might print
	additional information.
	* doc/tm.texi: Document TARGET_HELP hook.

	* arm.c (TARGET_HELP): Override default definition.
	(arm_target_help): New - display a list of cores and architectures
	supported.

2007-06-23  Nick Clifton  <nickc@redhat.com>

	Issue 109819:
	* config/mn10300/mn10300.c (mn10300_override_options): Disable
	first scheduling pass for the MN10300 (only).

2007-06-06  Nick Clifton  <nickc@redhat.com>

	* cfgloopanal.c (init_set_costs): Fix bug that prevented the
	correct setting of the hoisting costs.

2007-06-05  Nick Clifton  <nickc@redhat.com>

	* config/stormy16/stormy16.h (OVERRIDE_OPTIONS): Define.

2007-05-23  Nick Clifton  <nickc@redhat.com>

	* cfgloopanal.c (init_set_costs): Fix signed vs unsigned
	comparison problem.

2007-05-22  Nick Clifton  <nickc@redhat.com>

	* reload.c (push_secondary_reload): Add a test to prevent an
	infinite recursion.

2007-05-02  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips_split_64bit_move_p): Revert
	previous delta.  It breaks loading/storing of 64bit values
	when using 32bit registers.

2007-04-24  Corinna Vinschen  <vinschen@redhat.com>

	* config/i386/cygming.h: Set DWARF2_UNWIND_INFO to 1.

2007-04-17  Nick Clifton  <nickc@redhat.com>

	* config/mips/mips.c (mips_split_64bit_move_p): Disable 64bit
	splits during/after reload when -mlong64 and -mgp32 are in
	force and the source address in an invalid memory location.

2007-04-16  Nick Clifton  <nickc@redhat.com>

	* passes.c (init_optimization_passes): Move optimize local statics
	pass to adter cleaning the cgf.
	* tree-optimize-local-statics.c (scan_pending_list): Check for
	domination not post-domination.

2007-03-23  Martin Michlmayr  <tbm@cyrius.com>

	* doc/invoke.texi (-fforce-mem): Update documentation to reflect
	that this option will be removed in 4.3 rather than 4.2.
	* opts.c (common_handle_option): Likewise.

2007-03-21  Mike Stump  <mrs@apple.com>

	* c.opt: Fixup for Objective-C/C++.

2007-03-21  Richard Henderson  <rth@redhat.com>

	PR target/31245
	* config/i386/emmintrin.h (__m128i, __m128d): Mark may_alias.
	* config/i386/mmintrin.h (__m64): Likewise.
	* config/i386/xmmintrin.h (__m128): Likewise.

2007-03-20  Jakub Jelinek  <jakub@redhat.com>

	PR c/30762
	* c-typeck.c (convert_for_assignment): Call comptypes for
	RECORD_TYPE or UNION_TYPE.

	PR inline-asm/30505
	* reload1.c (reload): Do invalid ASM checking after
	cleanup_subreg_operands.

2007-03-19  Jeff Law  <law@redhat.com>

	* tree-cfg.c (find_taken_edge): Tighten conditions for
	optimizing computed gotos.

2007-03-16  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (attr_length_call): Partially revert change of 2007-03-09.
	(output_call): Likewise.

2007-03-16  Alexandre Oliva  <aoliva@redhat.com>

	PR debug/29906
	* dwarf2out.c (force_type_die): Adjust comment.
	(dwarf2out_imported_module_or_decl): Handle base AT_import types.

2007-03-15  Seongbae Park <seongbae.park@gmail.com>

	PR tree-optimization/30590
	* tree-nrv.c (tree_nrv): Check for the partial update
	of the return value.

2007-03-14  Ian Lance Taylor  <iant@google.com>

	* tree-vrp.c (value_inside_range): Ignore fold warnings.

2007-03-13  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR target/31123
	* pa.md (vdepi_ior): Don't allow zero length deposit.  Likewise for
	two unamed patterns.

2007-03-12  Brooks Moses  <brooks.moses@codesourcery.com>

	* doc/extend.texi: Edit "gnu_inline" documentation.
	* doc/invoke.texi: Edit "-fgnu89-inline" documentation.

2007-03-12  Brooks Moses  <brooks.moses@codesourcery.com>

	* doc/extend.texi: Fix cpp.info cross-reference.
	* doc/invoke.texi: Fix cpp.info cross-reference.
	* doc/passes.texi: Fix gcc.info cross-reference.

2007-03-12  Daniel Berlin  <dberlin@dberlin.org>

	Fix PR tree-optimization/28544
	* tree-ssa-operands.c (add_virtual_operand):
	Move assert triggering on aliasing violations into
	debugging define

2007-03-12  Ian Lance Taylor  <iant@google.com>

	* c.opt (fgnu89-inline): New option.
	* c-opts.c (c_common_post_options): Warn about -fno-gnu89-inline.
	* c-common.c (c_common_attributes): Add gnu_inline attribyte.
	(handle_gnu_inline_attribute): New static function.
	* c-decl.c (start_function): Warn if we see a non-static inline
	function in C99 mode.
	* c-cppbuiltin.c (c_cpp_builtins): Define __GNUC_GNU_INLINE__.
	* doc/invoke.texi (Option Summary): Mention -fgnu89-inline.
	(C Dialect Options): Document -fgnu89-inline.
	* doc/extend.texi (Function Attributes): Document gnu_inline.
	(Inline): Mention that C99 inline will be implemented in 4.3.
	Refer to ways to get the old handling.
	* doc/cpp.texi (Common Predefined Macros): Document
	__GNUC_GNU_INLINE__ and __GNUC_STDC_INLINE__.

2007-03-12  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.c (alpha_elf_section_type_flags): New.
	(TARGET_SECTION_TYPE_FLAGS): New.

2007-03-12  Richard Henderson  <rth@redhat.com>

	* config/darwin.c (machopic_reloc_rw_mask): New.
	(machopic_select_section): Use decl_readonly_section.
	* config/darwin-protos.h (machopic_reloc_rw_mask): Declare.
	* config/darwin.h (TARGET_ASM_RELOC_RW_MASK): New.

2007-02-14  Richard Guenther  <rguenther@suse.de>

	Backport from mainline:
	* flags.h (issue_strict_overflow_warning): Convert to a macro.

2007-03-11  Ian Lance Taylor  <iant@google.com>

	Backport -fstrict-overflow/-Wstrict-overflow from mainline:
	2007-03-11  Ian Lance Taylor  <iant@google.com>

	* tree-vrp.c (vrp_int_const_binop): Handle PLUS_EXPR and
	the *_DIV_EXPR codes correctly with overflow infinities.

	2007-03-09  Ian Lance Taylor  <iant@google.com>

	* opts.c (common_handle_option): Treat -Wstrict-overflow (with no
	argument) like -Wstrict-overflow=2.
	* doc/invoke.texi (Warning Options): Update documentation.

	2007-03-08  Ian Lance Taylor  <iant@google.com>

	* tree-vrp.c: Include "toplev.h" and "intl.h".
	(usable_range_p): New static function.
	(compare_values_warnv): Don't test TYPE_OVERFLOW_UNDEFINED for
	overflowed values, juts set *strict_overflow_p.
	(compare_values): Only return -2 if one of the operands is not a
	constant.
	(compare_ranges): Call usable_range_p.
	(compare_range_with_value): Likewise.
	(vrp_evaluate_conditional_warnv): Rename from
	vrp_evaluate_conditional.  Make static.  Change all callers.
	(vrp_evaluate_conditional): New function.
	(simplify_div_or_mod_using_ranges): Issue warning about reliance
	on signed overflow.
	(simplify_abs_using_ranges): Likewise.
	(simplify_stmt_for_jump_threading): Add within_stmt parameter.
	* tree-ssa-dom.c (simplify_stmt_for_jump_threading): Add
	within_stmt parameter.
	* tree-ssa-propagate.c (fold_predicate_in): Update call to
	vrp_evaluate_conditional.
	* tree-ssa-threadedge.c
	(record_temporary_equivalences_from_stmts_at_dest): Change
	simplify parameter to take a second tree parameter.
	(simplify_control_stmt_condition): Likewise.
	(thread_across_edge): Likewise.
	* tree-flow.h (vrp_evaluate_conditional): Update declaration.
	(thread_across_edge): Likewise.
	* gcc/Makefile.in (tree-vrp.o): Depend upon toplev.h and intl.h.

	2007-03-05  Ian Lance Taylor  <iant@google.com>

	* tree-vrp.c (extract_range_from_assert): Don't try to handle a
	half-range if the other side is an overflow infinity.

	2007-03-02  Ian Lance Taylor  <iant@google.com>

	Used signed infinities in VRP.
	* tree-vrp.c (uses_overflow_infinity): New static function.
	(supports_overflow_infinity): New static function.
	(make_overflow_infinity): New static function.
	(negative_overflow_infinity): New static function.
	(positive_overflow_infinity): New static function.
	(is_negative_overflow_infinity): New static function.
	(is_positive_overflow_infinity): New static function.
	(is_overflow_infinity): New static function.
	(overflow_infinity_range_p): New static function.
	(compare_values_warnv): New function split out of compare_values.
	(compare_value): Call it.
	(set_value_range_to_nonnegative): Add overflow_infinity
	parameter.  Change caller.
	(vrp_expr_computes_nonnegative): Add strict_overflow_p parameter.
	Change callers.
	(vrp_expr_computes_nonzero): Likewise.
	(compare_ranges, compare_range_with_value): Likewise.
	(compare_name_with_value, compare_names): Likewise.
	(vrp_evaluate_conditional): Likewise.
	(set_value_range): Handle infinity
	(vrp_operand_equal_p, operand_less_p): Likewise.
	(extract_range_from_assert): Likewise.
	(vrp_int_const_binop): Likewise.
	(extract_range_from_binary_expr): Likewise.
	(extract_range_from_unary_expr): Likewise.
	(extract_range_from_comparison): Likewise.
	(extract_range_from_expr): Likewise.
	(dump_value_range): Likewise.
	(vrp_visit_cond_stmt, vrp_visit_phi_node): Likewise.
	(test_for_singularity): Likewise.
	(vrp_int_const_binop): Remove inline qualifier.
	(adjust_range_with_scev): Add comment.
	* tree-flow.h (vrp_evaluate_conditional): Update declaration.

	2007-02-13  Ian Lance Taylor  <iant@google.com>

	* common.opt: Add Wstrict-overflow and Wstrict-overflow=.
	* flags.h (warn_strict_overflow): Declare.
	(enum warn_strict_overflow_code): Define.
	(issue_strict_overflow_warning): New static inline function.
	* opts.c (warn_strict_overflow): New variable.
	(common_handle_option): Handle OPT_Wstrict_overflow and
	OPT_Wstrict_overflow_.
	* c-opts.c (c_common_handle_option): Set warn_strict_overflow for
	OPT_Wall.
	* fold-const.c: Include intl.h.
	(fold_deferring_overflow_warnings): New static variable.
	(fold_deferred_overflow_warning): New static variable.
	(fold_deferred_overflow_code): New static variable.
	(fold_defer_overflow_warnings): New function.
	(fold_undefer_overflow_warnings): New function.
	(fold_undefer_and_ignore_overflow_warnings): New function.
	(fold_deferring_overflow_warnings_p): New function.
	(fold_overflow_warning): New static function.
	(make_range): Add strict_overflow_p parameter.  Change all
	callers.
	(extract_muldiv, extract_muldiv_1): Likewise.
	(fold_unary) [ABS_EXPR]: Check ABS_EXPR before calling
	tree_expr_nonnegative_p.
	(fold_negate_expr): Call fold_overflow_warning.
	(fold_range_test): Likewise.
	(fold_comparison): Likewise.
	(fold_binary): Likewise.  Call tree_expr_nonnegative_warnv_p
	instead of tree_expr_nonnegative_p.
	(tree_expr_nonnegative_warnv_p): Rename from
	tree_expr_nonnegative_p, add strict_overflow_p parameter.
	(tree_expr_nonnegative_p): New function.
	(tree_expr_nonzero_warnv_p): Rename from tree_expr_nonzero_p, add
	strict_overflow_p parameter.
	(tree_expr_nonzero_p): New function.
	* passes.c (verify_interpass_invariants): New static function.
	(execute_one_pass): Call it.
	* tree-ssa-loop-niter.c (expand_simple_operations): Ignore fold
	warnings.
	(number_of_iterations_exit, loop_niter_by_eval): Likewise.
	(estimate_numbers_of_iterations): Likewise.
	(scev_probably_wraps_p): Likewise.
	* tree-ssa-ccp.c: Include "toplev.h".
	(evaluate_stmt): Defer fold overflow warnings until we know we are
	going to optimize.
	(struct fold_stmt_r_data): Add stmt field.
	(fold_stmt_r): Defer fold overflow warnings until we know we
	optimized.
	(fold_stmt): Initialize stmt field of fold_stmt_r_data.
	(fold_stmt_inplace): Likewise.
	* tree-cfgcleanup.c: Include "toplev.h" rather than "errors.h".
	(cleanup_control_expr_graph): Defer fold overflow warnings until
	we know we are going to optimize.
	* tree-cfg.c (fold_cond_expr_cond): Likewise.
	* tree-ssa-threadedge.c (simplify_control_stmt_condition):
	Likewise.
	* tree-vrp.c (vrp_expr_computes_nonnegative): Call
	tree_expr_nonnegative_warnv_p instead of tree_expr_nonnegative_p.
	* tree-ssa-loop-manip.c (create_iv): Likewise.
	* c-typeck.c (build_conditional_expr): Likewise.
	(build_binary_op): Likewise.
	* tree-vrp.c (vrp_expr_computes_nonzero): Call
	tree_expr_nonzero_warnv_p instead of tree_expr_nonzero_p.
	(extract_range_from_unary_expr): Likewise.
	* simplify-rtx.c (simplify_const_relational_operation): Warn when
	assuming that signed overflow does not occur.
	* c-common.c (pointer_int_sum): Ignore fold overflow warnings.
	* tree.h (tree_expr_nonnegative_warnv_p): Declare.
	(fold_defer_overflow_warnings): Declare.
	(fold_undefer_overflow_warnings): Declare.
	(fold_undefer_and_ignore_overflow_warnings): Declare.
	(fold_deferring_overflow_warnings_p): Declare.
	(tree_expr_nonzero_warnv_p): Declare.
	* doc/invoke.texi (Option Summary): Add -Wstrict-overflow to list
	of warning options.
	(Warning Options): Document -Wstrict-overflow.
	* Makefile.in (tree-ssa-threadedge.o): Depend on toplev.h.
	(tree-ssa-ccp.o): Likewise.
	(tree-cfgcleanup.o): Change errors.h dependency to toplev.h.
	(fold-const.o): Depend on intl.h.

	2007-01-27  Ian Lance Taylor  <iant@google.com>

	* common.opt: Add fstrict-overflow.
	* opts.c (decode_options): Set flag_strict_overflow if -O2.
	* flags.h (TYPE_OVERFLOW_WRAPS): Define.
	(TYPE_OVERFLOW_UNDEFINED): Define.
	(TYPE_OVERFLOW_TRAPS): Define.  This replaces TYPE_TRAP_SIGNED.
	Replace all uses.
	* tree.h (TYPE_TRAP_SIGNED): Don't define.
	* fold-const.c (negate_expr_p): Use TYPE_OVERFLOW_UNDEFINED.
	(fold_negate_expr): Likewise.
	(make_range): Likewise.
	(extract_muldiv_1): Likewise.
	(fold_comparison): Likewise.
	(fold_binary): Likewise.
	(tree_expr_nonnegative_p): Likewise.
	(tree_expr_nonzero_p): Likewise.
	* tree-vrp.c (compare_values): Likewise.
	(extract_range_from_binary_expr): Likewise.
	(extract_range_from_unary_expr): Likewise.
	* tree-ssa-loop-niter.c (infer_loop_bounds_from_undefined):
	Likewise.
	(nowrap_type_p): Likewise.
	* tree-scalar-evolution.c (simple_iv): Likewise.
	* fold-const.c (negate_expr_p): Use TYPE_OVERFLOW_WRAPS.
	(build_range_check): Likewise.
	(extract_muldiv_1): Likewise.
	(fold_comparison): Likewise.
	* tree-vrp.c (vrp_int_const_binop): Likewise.
	(extract_range_from_unary_expr): Likewise.
	* convert.c (convert_to_integer): Likewise.
	* fold-const.c (fold_negate_expr): Use TYPE_OVERFLOW_TRAPS.
	(fold_comparison): Likewise.
	(fold_binary): Likewise.
	* optabs.c (optab_for_tree_code): Likewise.
	* tree-vectorizer.c (vect_is_simple_reduction): Likewise.
	* simplify-rtx.c (simplify_const_relational_operation): Check
	flag_strict_overflow and flag_trapv.
	(simplify_const_relational_operation): Likewise.
	* doc/invoke.texi (Option Summary): Mention -fstrict-overflow.
	(Optimize Options): Add -fstrict-overflow to -O2 list.  Document
	-fstrict-overflow.

	2007-01-17  Ian Lance Taylor  <iant@google.com>

	* vec.h (VEC_reserve_exact): Define.
	(vec_gc_p_reserve_exact): Declare.
	(vec_gc_o_reserve_exact): Declare.
	(vec_heap_p_reserve_exact): Declare.
	(vec_heap_o_reserve_exact): Declare.
	(VEC_OP (T,A,reserve_exact)): New static inline function, three
	versions.
	(VEC_OP (T,A,reserve)) [all versions]: Remove handling of
	negative parameter.
	(VEC_OP (T,A,alloc)) [all versions]: Call ...reserve_exact.
	(VEC_OP (T,A,copy)) [all versions]: Likewise.
	(VEC_OP (T,a,safe_grow)) [all versions]: Likewise.
	* vec.c (calculate_allocation): Add exact parameter.  Change all
	callers.
	(vec_gc_o_reserve_1): New static function, from vec_gc_o_reserve.
	(vec_gc_p_reserve, vec_gc_o_reserve): Call vec_gc_o_reserve_1.
	(vec_gc_p_reserve_exact, vec_gc_o_reserve_exact): New functions.
	(vec_heap_o_reserve_1): New static function, from vec_heap_o_reserve.
	(vec_heap_p_reserve, vec_heap_o_reserve): Call vec_heap_o_reserve_1.
	(vec_heap_p_reserve_exact): New function.
	(vec_heap_o_reserve_exact): New function.

2007-03-11  Roger Sayle  <roger@eyesopen.com>
	    Andrew Pinski  <andrew_pinski@playstation.sony.com>

	PR middle-end/30433
	* fold-const.c (fold_relational_const): Add back compile-time
	evaluation of complex constant equality/inequality comparisons.

2007-03-11  Ira Rosen  <irar@il.ibm.com>

	PR tree-optimization/29925
	* tree-data-ref.c (analyze_offset): Add a return value (bool) to
	indicate success/failure of the analysis. Add negation to subtrahend
	in case of subtraction. Fail if both operands contain constants.
	(create_data_ref): Fail if analyze_offset fails.

2007-03-10  Mark Mitchell  <mark@codesourcery.com>

	PR c++/30924
	* tree.c (walk_type_fields): Recurse into the element type of
	ARRAY_TYPEs if there is a pointer set.

2007-03-09  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (attr_length_call): Revise condition for long pc-relative branch.
	(output_call): Use "LONG_PIC_SDIFF" instruction sequence for long local
	calls on the SOM target.  Don't use "LONG_PIC_PCREL" call sequence on
	SOM target.

2007-03-09  Richard Henderson  <rth@redhat.com>

	PR target/26090
	* target.h (targetm.asm.out.reloc_rw_mask): New.
	* target-def.h (TARGET_ASM_RELOC_RW_MASK): New.
	(TARGET_ASM_OUT): Use it.
	* targhooks.c, targhooks.h (default_reloc_rw_mask): New.
	* varasm.c (categorize_decl_for_section): Remove shlib argument;
	use the new reloc_rw_mask target hook instead.
	(default_section_type_flags_1): Merge into...
	(default_section_type_flags): ... here.
	(decl_readonly_section_1): Merge into...
	(decl_readonly_section): ... here.
	(default_elf_select_section_1): Merge into...
	(default_elf_select_section): ... here.
	(default_unique_section_1): Merge into...
	(default_unique_section): ... here.
	(compute_reloc_for_rtx_1, compute_reloc_for_rtx): New.
	(default_select_rtx_section): Use it.
	(default_elf_select_rtx_section): Likewise.
	* output.h: Update to match.
	* doc/tm.texi (TARGET_ASM_RELOC_RW_MASK): New.
	* config/alpha/alpha.c (alpha_elf_reloc_rw_mask): New.
	(TARGET_ASM_RELOC_RW_MASK): New.
	* config/i386/i386.c (x86_64_elf_select_section): Adjust call
	to categorize_decl_for_section.
	(x86_64_elf_unique_section): Likewise.
	* config/ia64/hpux.h (TARGET_ASM_SELECT_SECTION,
	TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): Remove.
	(TARGET_ASM_RELOC_RW_MASK): New.
	* config/ia64/ia64.c (ia64_rwreloc_select_section,
	ia64_rwreloc_unique_section, ia64_rwreloc_select_rtx_section): Remove.
	(ia64_hpux_reloc_rw_mask, ia64_reloc_rw_mask): New.
	(TARGET_RWRELOC): Remove.
	(ia64_section_type_flags): Adjust call to default_section_type_flags.
	* config/ia64/sysv4.h (TARGET_ASM_RELOC_RW_MASK): New.
	* config/rs6000/rs6000.c (rs6000_elf_section_type_flags): Remove.
	(rs6000_elf_select_section, rs6000_elf_unique_section): Remove.
	(rs6000_elf_reloc_rw_mask, rs6000_xcoff_reloc_rw_mask): New.
	(rs6000_xcoff_select_section): Use decl_readonly_section.
	(rs6000_xcoff_section_type_flags): Use default_section_type_flags.
	* config/rs6000/sysv4.h (TARGET_ASM_RELOC_RW_MASK): New.
	(TARGET_ASM_SELECT_SECTION, TARGET_ASM_UNIQUE_SECTION): Remove.
	(TARGET_SECTION_TYPE_FLAGS): Remove.
	* config/rs6000/xcoff.h (TARGET_ASM_RELOC_RW_MASK): New.

2007-03-08  Geoffrey Keating  <geoffk@apple.com>

	PR 31013
	* gccspec.c (lang_specific_driver): Do nothing when NEXT_OBJC_RUNTIME
	is declared.
	* config/darwin.h (REAL_LIBGCC_SPEC): When -fgnu-runtime is
	passed, use shared libgcc.

2007-03-09  Alexandre Oliva  <aoliva@redhat.com>

	PR rtl-optimization/30643
	* cse.c (cse_insn): Recompute dest_hash after insert_regs for
	dest_addr_elt.

2007-03-09  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	PR tree-opt/30045
	* tree-vrp.c (nonnull_arg_p): Treat the static decl as always
	non null.

2007-03-09  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	PR middle-end/30729
	* stmt.c (warn_if_unused_value): VA_ARG_EXPR has side
	effects unknown to this function, return early.

2007-03-09  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	PR tree-opt/28624
	* tree-ssa-dom.c (eliminate_degenerate_phis): Use a temporary
	bitmap for EXECUTE_IF_SET_IN_BITMAP.

2006-03-09  Mark Shinwell  <shinwell@codesourcery.com>
	    Andrew MacLeod  <amacleod@redhat.com>
	PR tree-optimization/29877
	* tree-outof-ssa.c (check_replaceable): Don't allow TER to replace
	an expression if the RHS is a register variable.

2007-03-08  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	PR C/31072
	* c-decl.c (merge_decls): Don't call make_var_volatile.
	* varasm.c (make_var_volatile): Remove.
	* output.h (make_var_volatile): Remove.

2007-03-08  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* builtins.def (lceil, lceilf, lceill, lfloor, lfloorf, lfloorl,
	llceil, llceilf, llceill, llfloor, llfloorf, llfloorl): Mark with
	ATTR_CONST_NOTHROW_LIST.

	* fold-const.c (tree_expr_nonnegative_p): Handle FIX_TRUNC_EXPR.

2007-03-08 Andrew Pinski <andrew_pinski@playstation.sony.com>

	PR target/30406
	* config/rs6000/rs6000.c (rs6000_function_value): Look at bit size
	instead of precision.

2007-03-08  Volker Reichelt  <reichelt@netcologne.de>

	PR c++/30852
	* c-common.c (fold_offsetof_1): Handle COMPOUND_EXPR.

2007-03-07  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>

	* c.opt (Waddress): New.
	* common.opt (Walways-true): Delete.
	(Wstring-literal-comparison): Delete.
	* doc/invoke.texi (Warning Options): Delete -Walways-true and
	-Wstring-literal-comparison. Add -Waddress.
	(Waddress): New.
	(Walways-true): Delete.
	(Wstring-literal-comparison): Delete.
	* doc/extend.texi (#pragma GCC diagnostic): Use -Wformat
	consistently instead of -Walways-true in example.
	* c-opts.c (c_common_handle_option): -Waddress is enabled by -Wall.
	* c-typeck.c (parser_build_binary_op): Replace
	-Wstring-literal-comparison and -Walways-true with -Waddress.
	(build_binary_op): Likewise.
	* c-common.c (c_common_truthvalue_conversion): Likewise.

2007-03-07  Richard Henderson  <rth@redhat.com>

	PR target/30848
	* reg-stack.c (emit_swap_insn): If a malformed asm was seen,
	silently fix up the stack in the case of a missing register.

2007-03-06  David Daney  <ddaney@avtrex.com>

	* doc/install.texi (mips-*-*): Change recommended binutils
	version.

2007-03-06  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>

	* doc/invoke.texi (Warning Options): Replace -Werror- with
	-Werror=.
	* opts.c (common_handle_option): Likewise.

2007-03-06  Anatoly Sokolov <aesok@post.ru>

	* config/avr/avr.c (avr_mcu_types): Add support for ATmega325P,
	ATmega3250P, ATmega329P, ATmega3290P, AT90USB82 and AT90USB162
	devices.
	* config/avr/avr.h (LINK_SPEC, CRT_BINUTILS_SPECS): (Ditto.).
	* config/avr/t-avr (MULTILIB_MATCHES): (Ditto.).

2007-03-06  Roger Sayle  <roger@eyesopen.com>

	PR middle-end/30744
	* fold-const.c (fold_binary) <EQ_EXPR>: Enforce type consistency
	when transforming ~X op C to X op' ~C.

2007-03-05  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.md: In unamed move patterns, disparge copies between general
	and floating point registers using '?' modifier.  Don't include 'f'
	constraint for register preferences in DImode, SImode, HImode and
	QImode patterns.  Likewise for 'r' in DFmode and SFmode patterns.
	Remove constraints for copies between general and floating registers
	in soft-float DFmode pattern.
	(movdf): Fail if operand1 is a CONST_DOUBLE and operand0 is a hard
	floating register.
	(movsf): Likewise.

2007-03-05  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* convert.c (convert_to_integer): Fix nearbyint/rint -> *lrint
	conversion.

2007-03-05  Steve Ellcey  <sje@cup.hp.com>

	Backported from mainline
	PR debug/29614
	* cgraph.h (cgraph_varpool_last_needed_node): Make global.
	* cgraph.c (cgraph_varpool_last_needed_node): Ditto.
	* cgraphunit.c (cgraph_varpool_assemble_pending_decls):
	Set cgraph_varpool_last_needed_node to NULL.

2007/03/05  David Taylor  <dtaylor@emc.com>

	PR 31050
	* gcc.c: Correct copyright date in --version output.

2007-03-05  Brooks Moses  <brooks.moses@codesourcery.com>

	* c.opt: Remove -ffixed-form, -ffixed-line-length-none, and
	-ffixed-line-length-* options.

2007-03-05  David Edelsohn  <edelsohn@gnu.ogr>

	* config/rs6000/t-ppccomm: Always build libgcc2 for GNU/Linux
	with -mlong-double-128, except SPE.

	* config/rs6000/darwin-ldouble.c: Only build new functions for
	__LONG_DOUBLE_128__.

	Backport from mainline:
	2007-01-16  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/darwin-ldouble.c: Build file for SOFT_FLOAT.
	(strong_alias): Define.
	(__gcc_qmul): Provide non-FMA for soft-float.
	(__gcc_qdiv): Same.
	(__gcc_qneg): New.
	(__gcc_qeq): New.
	(__gcc_qle): New.
	(__gcc_qge): New.
	(__gcc_qunord): New.
	(__gcc_stoq): New.
	(__gcc_dtoq): New.
	(__gcc_qtos): New.
	(__gcc_qtod): New.
	(__gcc_qtoi): New.
	(__gcc_qtou): New.
	(__gcc_itoq): New.
	(__gcc_utoq): New.
	(fmsub): New.
	* config/rs6000/rs6000.c (rs6000_init_libfuncs): Initialize
	soft-float functions.
	* config/rs6000/libgcc-ppc-glibc.ver: Version soft-float symbols.
	* config/rs6000/sysv4.h (SUBTARGET_OVERRIDE_OPTIONS): Do not warn
	about long double soft float.

2007-03-05  Richard Guenther  <rguenther@suse.de>

	Backport from mainline:
	2007-02-28  Richard Guenther  <rguenther@suse.de>

	PR middle-end/30364
	* fold-const.c (fold_binary): Do not associate expressions
	with more than one variable for integer types that do not wrap.

2007-03-04  Eric Botcazou  <ebotcazou@adacore.com>

	PR ada/26797
	* doc/invoke.texi (-O2): Document that Tree-VRP is not turned on
	for the Ada compiler.

2007-03-02  Zdenek Dvorak <dvorakz@suse.cz>

	PR tree-optimization/29902
	* tree-ssa-loop-manip.c (can_unroll_loop_p): Return false if
	any involved ssa name appears in abnormal phi node.

2007-03-02  Eric Botcazou  <ebotcazou@adacore.com>

	* tree-sra.c (sra_walk_fns) <ldst>: Document new restriction.
	(sra_walk_modify_expr) <rhs_elt>: Treat the reference as a use
	if the lhs has side-effects.
	<lhs_elt>: Treat the reference as a use if the rhs has side-effects.

2007-03-02  Paul Brook  <paul@codesourcery.com>

	* config/arm/arm.c (arm_legitimate_index_p): Limit iWMMXt addressing
	modes to LDRD for DImode.
	(output_move_double): Fixup out of range ldrd/strd.
	(vfp_secondary_reload_class): Rename...
	(coproc_secondary_reload_class): ... to this.  Add wb argument.
	* config/arm/arm.h (SECONDARY_OUTPUT_RELOAD_CLASS): Use
	coproc_secondary_reload_class for CLASS_IWMMXT.
	(SECONDARY_INPUT_RELOAD_CLASS): Ditto.
	* arm-protos.h (coproc_secondary_reload_class): Update prototype.

2007-03-02  Eric Botcazou  <ebotcazou@adacore.com>

	* config/alpha/alpha.c (alpha_gp_save_rtx): Insert the insns at the
	entry by means of emit_insn_at_entry.

2007-03-01  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>

	* doc/invoke.texi (Wextra): Delete outdated paragraph.

2007-02-27  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa/predicates.md (move_src_operand): Allow zero for mode.
	* pa/pa.md: Fix constraints for zero CONST_DOUBLE in 64-bit DFmode
	move pattern.

2007-02-27  Mike Stump  <mrs@apple.com>

	* config/darwin-crt3.c: Avoid compilation when compiling for a
	kext multilib.

2007-02-27  Andreas Schwab  <schwab@suse.de>

	* Makefile.in (TEXI_GCCINSTALL_FILES): Add gcc-common.texi.

2007-02-26  Brooks Moses  <brooks.moses@codesourcery.com>

	* Makefile.in (TEXI_GCCINSTALL_FILES): Add gcc-vers.texi dependency.

2007-02-26  Brooks Moses  <brooks.moses@codesourcery.com>

	* doc/include/gcc-common.texi (versionsubtitle): New macro.
	* doc/cpp.texi: Standardize title page.
	* doc/cppinternals.texi: Likewise.
	* doc/gcc.texi: Standardize title page, remove version number
	from copyright page.
	* doc/gccint.texi: Likewise.
	* doc/install.texi: Standardize title page, add table of
	contents.

2007-02-24  Mike Stump  <mrs@apple.com>

	* config/i386/i386.c (output_pic_addr_const): Stubify optimized
	symbols.

2007-02-24  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.md (muldi3): Force subregs to registers in 64-bit expander.

2007-02-23  Mike Stump  <mrs@apple.com>

	* tlink.c (scan_linker_output): Parse linker messages from
	darwin9's linker better.

2007-02-21 Ira Rosen  <irar@il.ibm.com>

	* tree-ssa-alias.c: Include pointer-set.h
	* Makefile.in (tree-ssa-alias.o): Depend on pointer-set.h.

2007-02-21  Jakub Jelinek  <jakub@redhat.com>

	Backported from mainline
	2006-12-20  Andrew Pinski  <pinskia@gmail.com>
	PR middle-end/30143
	* omp-low.c (init_tmp_var): New function.
	(save_tmp_var): New function.
	(lower_omp_1): Use them for VAR_DECL.

2007-02-20  Alan Modra  <amodra@bigpond.net.au>

	PR target/29943
	* varasm.c (use_blocks_for_decl_p): Return false for decls with
	alias attribute.

2007-02-19  Eric Botcazou  <ebotcazou@adacore.com>

	* gimplify.c (gimplify_init_ctor_preeval_1): Detect potential overlap
	due to calls to functions taking pointers as parameters.

2007-02-19  Richard Henderson  <rth@redhat.com>

	PR debug/29558
	* var-tracking.c (track_expr_p): Disallow AGGREGATE_TYPE_P
	in memory.

2007-02-18  Eric Botcazou  <ebotcazou@adacore.com>

	* tree-eh.c (tree_could_trap_p): Handle VIEW_CONVERT_EXPR.

2007-02-18  Eric Botcazou  <ebotcazou@adacore.com>

	* calls.c (mem_overlaps_already_clobbered_arg_p): Return true
	for arg pointer based indexed addressing.

2007-02-18 Ira Rosen  <irar@il.ibm.com>

	* tree-ssa-alias.c (may_aliases_intersect): New function.
	* tree-data-ref.c (ptr_ptr_may_alias_p): Call may_aliases_intersect
	for different tags.
	* tree-flow.h (may_aliases_intersect): Add function declaration.

2007-02-17  Alexandre Oliva  <aoliva@redhat.com>

	PR tree-optimization/30823
	* tree-sra.c (sra_build_assignment): Drop type-checking assert.

2007-02-16  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	PR other/27843
	* Makefile.in (SYSTEM_HEADER_DIR): Use single quotes to avoid
	nested double- and backquotes.

2007-02-15  Alexandre Oliva  <aoliva@redhat.com>

	* tree-sra.c (instantiate_missing_elements): Canonicalize
	bit-field types.
	(sra_build_assignment): New.
	(generate_copy_inout, generate_element_copy,
	generate_element_zero, generate_one_element_init): Use it.

2007-02-15  Kaz Kojima  <kkojima@gcc.gnu.org>

	PR rtl-optimization/29599
	Backport from mainline.
	* reload1.c (eliminate_regs_in_insn): Take the destination
	mode into account when computing the offset.

2007-02-13  Joseph S. Myers  <joseph@codesourcery.com>

	* doc/invoke.texi, doc/standards.texi: Refer to
	gcc-4.2/c99status.html.

2007-02-10  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR target/30634
	* pa.md (movdf): For 64-bit target, fail if operand 1 is a non-zero
	CONST_DOUBLE and operand 0 is a hard register.
	(movdi): For 64-bit target, remove code to force CONST_DOUBLE to
	memory.  Fail if operand 1 is a non-zero CONST_INT and operand 0
	is a hard floating-point register.

2007-02-06  Mark Mitchell  <mark@codesourcery.com>

	PR target/29487
	* tree.h (DECL_REPLACEABLE_P): New macro.
	* except.c (set_nothrow_function_flags): Likewise.

2007-02-07  Jakub Jelinek  <jakub@redhat.com>

	PR c++/30703
	* gimplify.c (gimplify_scan_omp_clauses): Remove special casing
	of INDIRECT_REF <RESULT_DECL>.

2007-02-06  Rask Ingemann Lamberisen  <rask@sygehus.dk>

	PR 30370
	* config/rs6000/t-ppccomm: Correct Makefile typo.

2007-02-06  Roger Sayle  <roger@eyesopen.com>

	PR libgomp/28296
	Backport from mainline.
	* config/darwin.h (CPP_SPEC): Handle -pthread, transforming
	it into -D_REENTRANT.

2007-02-05  Alexandre Oliva  <aoliva@redhat.com>

	PR debug/30189
	* dwarf2out.c (modified_type_die): Follow DECL_ORIGINAL_TYPE
	even if cv-qualification is the same.

2007-02-05  Geoffrey Keating  <geoffk@apple.com>

	* config/rs6000/darwin-tramp.asm (__trampoline_setup): Call
	__enable_execute_stack on completion.

2007-02-05  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.c (constantpool_mem_p): Skip over SUBREGs.

2007-02-02  Maxim Kuvyrkov  <mkuvyrkov@ispras.ru>

	PR target/29682
	* config/ia64/ia64.c (ia64_speculate_insn): Restrict to memory loads to
	general or fp registers.  Add comments.
	* config/ia64/ia64.md (reg_pred_prefix): Add comment.

2007-02-04  Richard Guenther  <rguenther@suse.de>

	Backport from mainline:
	2007-01-30  Richard Guenther  <rguenther@suse.de>

	PR middle-end/27657
	* dwarf2out.c (reference_to_unused): Query varpool if the
	variable was output.

2007-02-02  Mike Stump  <mrs@apple.com>

	* config.gcc (*-*-darwin*): Backport darwin9.h bits.
	* config/darwin9.h: Add.
	* config/rs6000/rs6000.c (DARWIN_GENERATE_ISLANDS): Add.
	(output_call): Use DARWIN_GENERATE_ISLANDS to decide when to
	generate a branch island.

2007-02-02  Hui-May Chang  <hm.chang@apple.com>

	Revert for x86 darwin:
	2005-06-19  Uros Bizjak  <uros@kss-loka.si>

	* config/i386/i386.c (ix86_function_arg_regno_p): Put back the
	code before the following patch under TARGET_MACHO.
	(ix86_function_value_regno_p): Likewise.

2007-02-02  Simon Martin  <simartin@users.sourceforge.net>

	PR c++/28266
	* gimplify.c (gimplify_target_expr): Make sure that the TARGET_EXPR is
	expanded only once even if an error occurs.

2007-02-02  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/30473
	* builtins.c (fold_builtin_sprintf): Do not attempt to optimize
	sprintf (str, "%s").  Do not optimize sprintf (str, "nopercent", p++).

2007-02-01  Guy Martin  <gmsoft@gentoo.org>

	* pa.md (tp_load): Correct mfctl instruction syntax.

2007-02-01  Geoffrey Keating  <geoffk@apple.com>

	* config/rs6000/rs6000.c (rs6000_stack_info): Correct
	altivec_padding_size calculation on AIX.  Improve comment, add
	assert to verify that it's right.

2007-01-31  Anatoly Sokolov <aesok@post.ru>

	PR target/19087
	* config/avr/avr.c (DWARF2_ADDR_SIZE): Define.

2007-01-30  Richard Guenther  <rguenther@suse.de>

	PR middle-end/30313
	* passes.c (execute_one_pass): Reset in_gimple_form to not
	confuse non-unit-at-a-time mode.

2007-01-27  Anatoly Sokolov <aesok@post.ru>

	* config/avr/avr.h (TARGET_CPU_CPP_BUILTINS): Define __AVR_HAVE_MUL__.

2007-01-29  Mike Stump  <mrs@apple.com>

	* doc/gccint.texi (Top): Rename Loop Representation to Loop
	Analysis and Representation to resolve case insensitive conflict.
	* doc/loop.texi (Loop Analysis and Representation): Likewise.

2007-01-29  Josh Conner  <jconner@apple.com>

	PR middle-end/29683
	* calls.c (compute_argument_addresses): Set stack and stack_slot
	for partial args, too.
	(store_one_arg): Use locate.size.constant for the size when
	generating a save_area.

2007-01-28  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* doc/sourcebuild.texi: Add comma for clarity.
	* doc/extend.texi: Fix some typos.
	* doc/passes.texi: Likewise.
	* doc/cppinternals.texi: Likewise.
	* doc/c-tree.texi: Likewise.
	* doc/tree-ssa.texi: Likewise.
	* doc/install.texi: Likewise.

2007-01-26  Zdenek Dvorak <dvorakz@suse.cz>

	PR tree-optimization/29516
	* tree-ssa-address.c (tree_mem_ref_addr, add_to_parts,
	most_expensive_mult_to_index, addr_to_parts,
	create_mem_ref, maybe_fold_tmr): Make the type of
	fields of TARGET_MEM_REF sizetype.
	(move_fixed_address_to_symbol, move_pointer_to_base,
	aff_combination_remove_elt): New functions.
	* tree.def (TARGET_MEM_REF): Add comment on types of
	the operands.
	* gcc.dg/tree-ssa/loop-20.c: New test.

2007-01-25  Geoffrey Keating  <geoffk@apple.com>

	PR 25127
	* config/rs6000/rs6000.c (first_altivec_reg_to_save): On Darwin,
	save Altivec registers in an eh_return function.
	(compute_vrsave_mask): Likewise.
	(rs6000_stack_info): Correct AIX/Darwin stack alignment computation
	for saving Altivec registers.
	(rs6000_emit_prologue): Don't allocate stack twice in
	eh_return function.  Correct expected value of altivec_save_offset
	when using save_world.  Describe save of R0 to stack when using
	save_world.  Describe stack pointer adjustment when using
	save_world.  Remove duplicated eh_return parameter register saving.
	Update sp_offset variable after save_world.
	* config/rs6000/t-darwin (LIB2FUNCS_STATIC_EXTRA): Remove
	darwin-world.asm.
	(LIB2FUNCS_EXTRA): Add darwin-world.asm.
	* config/rs6000/darwin.h (SUBTARGET_OVERRIDE_OPTIONS): -m64
	implies Altivec.

2007-01-24  Geoffrey Keating  <geoffk@apple.com>

	* unwind-dw2.c (execute_stack_op): Handle DW_OP_swap.

2007-01-24  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/27416
	* gimplify.c (omp_check_private): New function.
	(gimplify_scan_omp_clauses): Use it for
	firstprivate/lastprivate/reduction.

	PR middle-end/30494
	* gimplify.c (omp_add_variable): Don't call omp_notice_variable
	on TYPE_SIZE_UNIT for GOVD_LOCAL VLAs.

	PR middle-end/30421
	* omp-low.c (lower_omp_for_lastprivate): Add dlist argument.
	If lower_lastprivate_clauses emits some statements, append them
	to dlist rather than body_p and to body_p append an initializer.
	(lower_omp_for): Adjust caller.

2007-01-21  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR rtl-optimization/29329
	* combine.c (replaced_rhs_insn): Rename to i2mod.
	(replaced_rhs_value): Rename to i2mod_new_rhs.
	(i2mod_old_rhs): New global variable.
	(combine_instructions): Adjust for above change.  Save a copy of
	the old RHS into i2mod_old_rhs when the contents of a REG_EQUAL
	note are substituted in the second instruction.
	(distribute_notes) <REG_DEAD>: Adjust for above change.  Do not
	ditch the note if it pertains to the second eliminated register
	and this register is mentioned in i2mod_old_rhs.

	Revert:
	2006-09-12  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* combine.c (distribute_notes) <REG_DEAD>: Do not consider SETs past
	the insn to which the note was originally attached.

2007-01-20  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (output_move_double): Change array size of xoperands to 4.

2007-01-17  Eric Christopher  <echristo@apple.com>

	Backport from mainline:
	2006-12-18  Roger Sayle  <roger@eyesopen.com>
	            Eric Christopher  <echristo@apple.com>

	PR target/29302
	* real.c (real_maxval): Correctly handle IBM extended double format.

2007-01-17  Tom Tromey  <tromey@redhat.com>

	* doc/sourcebuild.texi (libgcj Tests): Use sourceware.org.
	* doc/install.texi (Testing): Use sourceware.org.
	(Binaries): Likewise.
	(Specific): Likewise.
	* doc/contrib.texi (Contributors): Use sourceware.org.

2007-01-15  Joseph S. Myers  <joseph@codesourcery.com>

	* config/soft-fp/op-common.h, config/soft-fp/op-4.h: Update from
	glibc CVS.

2007-01-11  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa-linux.h (ASM_OUTPUT_INTERNAL_LABEL): Undefine.
	* pa.h (ASM_OUTPUT_LABEL): Output colon when using GAS.
	(ASM_OUTPUT_INTERNAL_LABEL): Define.

2007-01-10  Ralf Corspius <ralf.corsepius@rtems.org>

	* config/bfin/t-bfin, config/bfin/t-bfin-elf: Remove GCC_CFLAGS.

2007-01-09  Nicolas Pitre  <nico@cam.org>

	PR target/30173
	* arm/ieee754-df.S (Lad_s): Also test the low word of X for zero.

2007-01-08  Nick Clifton  <nickc@redhat.com>

	* config/frv/predicates.md (reg_or_0_operand): Accept
	CONST_DOUBLEs.

2007-01-08  Ralf Corspius <ralf.corsepius@rtems.org>

	* config/bfin/rtems.h, config/bfin/t-rtems: New.
	* config.gcc: Add bfin*-rtems*.

2007-01-08  Chen liqin  <liqin@sunnorth.com.cn>
	* config/score/t-score-elf (MULTILIB_OPTIONS): Change.
	* config/score/predicates.md (const_uimm5, sr0_operand, const_simm12,
	const_simm15, const_pow2, const_npow2): Added.
	* config/score/misc.md (insv, extv, extzv, movmemsi,
	move_lbu_a/b, mov_lhu_a/b etc): Added and fix some bug.
	* config/score/score.c (score_address_cost, score_select_cc_mode):
	Added.
	Change CONST_OK_FOR_LETTER_P/EXTRA_CONSTRAINT define.
	Update score_rtx_costs for MACRO TARGET_RTX_COSTS.
	Update score_print_operand.
	* config/score/score.h (DATA_ALIGNMENT, SELECT_CC_MODE): Added.
	Adjust register allocate order and update some macro define.
	* config/score/score-mdaux.c (mdx_unaligned_load, mdx_unsigned_store,
	mdx_block_move_straight, mdx_block_move_loop_head,
	mdx_block_move_loop_body, mdx_block_move_loop_foot, mdx_block_move_loop,
	mdx_block_move): Added.
	(mdx_movsicc, mdp_select_add_imm, mdp_select, mds_zero_extract_andi,
	mdp_limm): Updated and fix some bug and typo.
	* config/score/score.md (movqi/hi/si, add/sub/zero/ext): Updated.
	(movsf, movdf, doloop_end): Added.

2007-01-05  Richard Guenther  <rguenther@suse.de>

	PR middle-end/27826
	* tree.c (get_narrower): Do not construct COMPONENT_REFs
	with mismatched types.  Instead explicitly build a
	conversion NOP_EXPR.

2007-01-05  Jakub Jelinek  <jakub@redhat.com>

	PR c/30360
	* libgcc2.c (__divdc3): Compare c and d against 0.0 instead of
	denom against 0.0.

2007-01-03  Jakub Jelinek  <jakub@redhat.com>

	* unwind-dw2.c (SIGNAL_FRAME_BIT, EXTENDED_CONTEXT_BIT): Define.
	(struct _Unwind_Context): Rename args_size to flags, remove
	signal_frame field, add a new args_size field and version field.
	(_Unwind_IsSignalFrame, _Unwind_SetSignalFrame,
	_Unwind_IsExtendedContext): New inline functions.
	(_Unwind_GetGR, _Unwind_SetGR, _Unwind_GetGRPtr, _Unwind_SetGRPtr):
	Assume by_value array is only present if _Unwind_IsExtendedContext.
	(_Unwind_GetIPInfo, execute_cfa_program, uw_frame_state_for): Use
	_Unwind_IsSignalFrame.
	(__frame_state_for): Initialize context.flags to EXTENDED_CONTEXT_BIT.
	(uw_update_context_1): Use _Unwind_SetSignalFrame.
	(uw_init_context_1): Initialize context->flags to
	EXTENDED_CONTEXT_BIT.
	* config/rs6000/linux-unwind.h (frob_update_context): Use
	_Unwind_SetSignalFrame.

2007-01-01  Mike Stump  <mrs@apple.com>

	* configure.ac: Remove support for building with Apple's gcc-3.1.

2007-01-01  Andreas Schwab  <schwab@suse.de>

	PR target/29166
	* config/ia64/ia64.c (ia64_compute_frame_size): Account space for
	save of BR0 in extra_spill_size instead of spill_size.
	(ia64_expand_prologue): Save BR0 outside of the gr/br/fr spill
	area.
	(ia64_expand_epilogue): Restore BR0 from its new location.

Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
change-log-default-name: "ChangeLog.RedHat"
End:
